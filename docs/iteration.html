<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>21 반복 | R 을 활용한 데이터과학</title>
  <meta name="description" content="21 반복 | R 을 활용한 데이터과학" />
  <meta name="generator" content="bookdown 0.23.1 and GitBook 2.6.7" />

  <meta property="og:title" content="21 반복 | R 을 활용한 데이터과학" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://sulgik.github.io/r4ds/" />
  <meta property="og:image" content="https://sulgik.github.io/r4ds//cover.png" />
  
  <meta name="github-repo" content="sulgik/r4ds" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="21 반복 | R 을 활용한 데이터과학" />
  <meta name="twitter:site" content="@sulgik" />
  
  <meta name="twitter:image" content="https://sulgik.github.io/r4ds//cover.png" />

<meta name="author" content="개럿 그롤문드" />
<meta name="author" content="해들리 위컴" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="vectors.html"/>
<link rel="next" href="communicate-intro.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.4.0/str_view.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.4.1/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="r4ds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Data Science</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>환영합니다</a></li>
<li class="chapter" data-level="1" data-path="서문.html"><a href="서문.html"><i class="fa fa-check"></i><b>1</b> 서문</a>
<ul>
<li class="chapter" data-level="1.1" data-path="서문.html"><a href="서문.html#무엇을-배우게-될까"><i class="fa fa-check"></i><b>1.1</b> 무엇을 배우게 될까</a></li>
<li class="chapter" data-level="1.2" data-path="서문.html"><a href="서문.html#이-책의-구성"><i class="fa fa-check"></i><b>1.2</b> 이 책의 구성</a></li>
<li class="chapter" data-level="1.3" data-path="서문.html"><a href="서문.html#배우지-않는-것"><i class="fa fa-check"></i><b>1.3</b> 배우지 않는 것</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="서문.html"><a href="서문.html#빅데이터"><i class="fa fa-check"></i><b>1.3.1</b> 빅데이터</a></li>
<li class="chapter" data-level="1.3.2" data-path="서문.html"><a href="서문.html#python-julia"><i class="fa fa-check"></i><b>1.3.2</b> Python, Julia</a></li>
<li class="chapter" data-level="1.3.3" data-path="서문.html"><a href="서문.html#비직사각형-데이터"><i class="fa fa-check"></i><b>1.3.3</b> 비직사각형 데이터</a></li>
<li class="chapter" data-level="1.3.4" data-path="서문.html"><a href="서문.html#가설-확인"><i class="fa fa-check"></i><b>1.3.4</b> 가설 확인</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="서문.html"><a href="서문.html#준비하기"><i class="fa fa-check"></i><b>1.4</b> 준비하기</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="서문.html"><a href="서문.html#r"><i class="fa fa-check"></i><b>1.4.1</b> R</a></li>
<li class="chapter" data-level="1.4.2" data-path="서문.html"><a href="서문.html#rstudio"><i class="fa fa-check"></i><b>1.4.2</b> RStudio</a></li>
<li class="chapter" data-level="1.4.3" data-path="서문.html"><a href="서문.html#tidyverse"><i class="fa fa-check"></i><b>1.4.3</b> Tidyverse</a></li>
<li class="chapter" data-level="1.4.4" data-path="서문.html"><a href="서문.html#기타-패키지들"><i class="fa fa-check"></i><b>1.4.4</b> 기타 패키지들</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="서문.html"><a href="서문.html#r-코드-실행하기"><i class="fa fa-check"></i><b>1.5</b> R 코드 실행하기</a></li>
<li class="chapter" data-level="1.6" data-path="서문.html"><a href="서문.html#도움받기-더-배우기"><i class="fa fa-check"></i><b>1.6</b> 도움받기, 더 배우기</a></li>
<li class="chapter" data-level="1.7" data-path="서문.html"><a href="서문.html#acknowledgements"><i class="fa fa-check"></i><b>1.7</b> Acknowledgements</a></li>
<li class="chapter" data-level="1.8" data-path="서문.html"><a href="서문.html#colophon"><i class="fa fa-check"></i><b>1.8</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I 탐색하기</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> 소개</a></li>
<li class="chapter" data-level="3" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>3</b> 데이터 시각화</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#들어가기"><i class="fa fa-check"></i><b>3.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-visualisation.html"><a href="data-visualisation.html#준비하기-1"><i class="fa fa-check"></i><b>3.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-visualisation.html"><a href="data-visualisation.html#첫-단계"><i class="fa fa-check"></i><b>3.2</b> 첫 단계</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data-visualisation.html"><a href="data-visualisation.html#mpg-데이터프레임"><i class="fa fa-check"></i><b>3.2.1</b> <code>mpg</code> 데이터프레임</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-visualisation.html"><a href="data-visualisation.html#ggplot-생성하기"><i class="fa fa-check"></i><b>3.2.2</b> ggplot 생성하기</a></li>
<li class="chapter" data-level="3.2.3" data-path="data-visualisation.html"><a href="data-visualisation.html#그래프-작성-템플릿"><i class="fa fa-check"></i><b>3.2.3</b> 그래프 작성 템플릿</a></li>
<li class="chapter" data-level="3.2.4" data-path="data-visualisation.html"><a href="data-visualisation.html#연습문제"><i class="fa fa-check"></i><b>3.2.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-visualisation.html"><a href="data-visualisation.html#심미성-매핑"><i class="fa fa-check"></i><b>3.3</b> 심미성 매핑</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises"><i class="fa fa-check"></i><b>3.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="data-visualisation.html"><a href="data-visualisation.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="data-visualisation.html"><a href="data-visualisation.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-1"><i class="fa fa-check"></i><b>3.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-visualisation.html"><a href="data-visualisation.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric objects</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-2"><i class="fa fa-check"></i><b>3.6.1</b> Exercises</a></li>
<li class="chapter" data-level="3.6.2" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-3"><i class="fa fa-check"></i><b>3.6.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-visualisation.html"><a href="data-visualisation.html#position-adjustments"><i class="fa fa-check"></i><b>3.7</b> Position adjustments</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-4"><i class="fa fa-check"></i><b>3.7.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="data-visualisation.html"><a href="data-visualisation.html#coordinate-systems"><i class="fa fa-check"></i><b>3.8</b> Coordinate systems</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="data-visualisation.html"><a href="data-visualisation.html#exercises-5"><i class="fa fa-check"></i><b>3.8.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="data-visualisation.html"><a href="data-visualisation.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.9</b> The layered grammar of graphics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow: basics</a>
<ul>
<li class="chapter" data-level="4.1" data-path="workflow-basics.html"><a href="workflow-basics.html#coding-basics"><i class="fa fa-check"></i><b>4.1</b> Coding basics</a></li>
<li class="chapter" data-level="4.2" data-path="workflow-basics.html"><a href="workflow-basics.html#whats-in-a-name"><i class="fa fa-check"></i><b>4.2</b> What’s in a name?</a></li>
<li class="chapter" data-level="4.3" data-path="workflow-basics.html"><a href="workflow-basics.html#calling-functions"><i class="fa fa-check"></i><b>4.3</b> Calling functions</a></li>
<li class="chapter" data-level="4.4" data-path="workflow-basics.html"><a href="workflow-basics.html#exercises-6"><i class="fa fa-check"></i><b>4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data-transform.html"><a href="data-transform.html"><i class="fa fa-check"></i><b>5</b> Data transformation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data-transform.html"><a href="data-transform.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data-transform.html"><a href="data-transform.html#prerequisites"><i class="fa fa-check"></i><b>5.1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="5.1.2" data-path="data-transform.html"><a href="data-transform.html#nycflights13"><i class="fa fa-check"></i><b>5.1.2</b> nycflights13</a></li>
<li class="chapter" data-level="5.1.3" data-path="data-transform.html"><a href="data-transform.html#dplyr-basics"><i class="fa fa-check"></i><b>5.1.3</b> dplyr basics</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data-transform.html"><a href="data-transform.html#rows"><i class="fa fa-check"></i><b>5.2</b> Rows</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="data-transform.html"><a href="data-transform.html#filter"><i class="fa fa-check"></i><b>5.2.1</b> <code>filter()</code></a></li>
<li class="chapter" data-level="5.2.2" data-path="data-transform.html"><a href="data-transform.html#arrange"><i class="fa fa-check"></i><b>5.2.2</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="5.2.3" data-path="data-transform.html"><a href="data-transform.html#exercises-7"><i class="fa fa-check"></i><b>5.2.3</b> Exercises</a></li>
<li class="chapter" data-level="5.2.4" data-path="data-transform.html"><a href="data-transform.html#mutate"><i class="fa fa-check"></i><b>5.2.4</b> <code>mutate()</code></a></li>
<li class="chapter" data-level="5.2.5" data-path="data-transform.html"><a href="data-transform.html#select"><i class="fa fa-check"></i><b>5.2.5</b> <code>select()</code></a></li>
<li class="chapter" data-level="5.2.6" data-path="data-transform.html"><a href="data-transform.html#rename"><i class="fa fa-check"></i><b>5.2.6</b> <code>rename()</code></a></li>
<li class="chapter" data-level="5.2.7" data-path="data-transform.html"><a href="data-transform.html#relocate"><i class="fa fa-check"></i><b>5.2.7</b> <code>relocate()</code></a></li>
<li class="chapter" data-level="5.2.8" data-path="data-transform.html"><a href="data-transform.html#exercises-8"><i class="fa fa-check"></i><b>5.2.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="data-transform.html"><a href="data-transform.html#groups"><i class="fa fa-check"></i><b>5.3</b> Groups</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data-transform.html"><a href="data-transform.html#group_by"><i class="fa fa-check"></i><b>5.3.1</b> <code>group_by()</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="data-transform.html"><a href="data-transform.html#summarise"><i class="fa fa-check"></i><b>5.3.2</b> <code>summarise()</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="data-transform.html"><a href="data-transform.html#combining-multiple-operations"><i class="fa fa-check"></i><b>5.3.3</b> Combining multiple operations</a></li>
<li class="chapter" data-level="5.3.4" data-path="data-transform.html"><a href="data-transform.html#grouping-by-multiple-variables"><i class="fa fa-check"></i><b>5.3.4</b> Grouping by multiple variables</a></li>
<li class="chapter" data-level="5.3.5" data-path="data-transform.html"><a href="data-transform.html#ungrouping"><i class="fa fa-check"></i><b>5.3.5</b> Ungrouping</a></li>
<li class="chapter" data-level="5.3.6" data-path="data-transform.html"><a href="data-transform.html#selecting-rows"><i class="fa fa-check"></i><b>5.3.6</b> Selecting rows</a></li>
<li class="chapter" data-level="5.3.7" data-path="data-transform.html"><a href="data-transform.html#other-verbs"><i class="fa fa-check"></i><b>5.3.7</b> Other verbs</a></li>
<li class="chapter" data-level="5.3.8" data-path="data-transform.html"><a href="data-transform.html#exercises-9"><i class="fa fa-check"></i><b>5.3.8</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="workflow-scripts.html"><a href="workflow-scripts.html"><i class="fa fa-check"></i><b>6</b> Workflow: scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="workflow-scripts.html"><a href="workflow-scripts.html#running-code"><i class="fa fa-check"></i><b>6.1</b> Running code</a></li>
<li class="chapter" data-level="6.2" data-path="workflow-scripts.html"><a href="workflow-scripts.html#rstudio-diagnostics"><i class="fa fa-check"></i><b>6.2</b> RStudio diagnostics</a></li>
<li class="chapter" data-level="6.3" data-path="workflow-scripts.html"><a href="workflow-scripts.html#exercises-10"><i class="fa fa-check"></i><b>6.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html"><i class="fa fa-check"></i><b>7</b> 탐색적 데이터 분석</a>
<ul>
<li class="chapter" data-level="7.1" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#들어가기-1"><i class="fa fa-check"></i><b>7.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#준비하기-2"><i class="fa fa-check"></i><b>7.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#questions"><i class="fa fa-check"></i><b>7.2</b> Questions</a></li>
<li class="chapter" data-level="7.3" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#변동"><i class="fa fa-check"></i><b>7.3</b> 변동</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#분포-시각화"><i class="fa fa-check"></i><b>7.3.1</b> 분포 시각화</a></li>
<li class="chapter" data-level="7.3.2" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#typical-values"><i class="fa fa-check"></i><b>7.3.2</b> Typical values</a></li>
<li class="chapter" data-level="7.3.3" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#unusual-values"><i class="fa fa-check"></i><b>7.3.3</b> Unusual values</a></li>
<li class="chapter" data-level="7.3.4" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#exercises-11"><i class="fa fa-check"></i><b>7.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#missing-values"><i class="fa fa-check"></i><b>7.4</b> Missing values</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#exercises-12"><i class="fa fa-check"></i><b>7.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#covariation"><i class="fa fa-check"></i><b>7.5</b> Covariation</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#cat-cont"><i class="fa fa-check"></i><b>7.5.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="7.5.2" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#two-categorical-variables"><i class="fa fa-check"></i><b>7.5.2</b> Two categorical variables</a></li>
<li class="chapter" data-level="7.5.3" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#two-continuous-variables"><i class="fa fa-check"></i><b>7.5.3</b> Two continuous variables</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#patterns-and-models"><i class="fa fa-check"></i><b>7.6</b> Patterns and models</a></li>
<li class="chapter" data-level="7.7" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#ggplot2-calls"><i class="fa fa-check"></i><b>7.7</b> ggplot2 calls</a></li>
<li class="chapter" data-level="7.8" data-path="탐색적-데이터-분석.html"><a href="탐색적-데이터-분석.html#learning-more"><i class="fa fa-check"></i><b>7.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="workflow-projects.html"><a href="workflow-projects.html"><i class="fa fa-check"></i><b>8</b> Workflow: projects</a>
<ul>
<li class="chapter" data-level="8.1" data-path="workflow-projects.html"><a href="workflow-projects.html#where-does-your-analysis-live"><i class="fa fa-check"></i><b>8.1</b> Where does your analysis live?</a></li>
<li class="chapter" data-level="8.2" data-path="workflow-projects.html"><a href="workflow-projects.html#paths-and-directories"><i class="fa fa-check"></i><b>8.2</b> Paths and directories</a></li>
<li class="chapter" data-level="8.3" data-path="workflow-projects.html"><a href="workflow-projects.html#rstudio-projects"><i class="fa fa-check"></i><b>8.3</b> RStudio projects</a></li>
</ul></li>
<li class="part"><span><b>II 데이터 길들이기</b></span></li>
<li class="chapter" data-level="9" data-path="wrangle-intro.html"><a href="wrangle-intro.html"><i class="fa fa-check"></i><b>9</b> 소개</a></li>
<li class="chapter" data-level="10" data-path="tibble.html"><a href="tibble.html"><i class="fa fa-check"></i><b>10</b> 티블</a>
<ul>
<li class="chapter" data-level="10.1" data-path="tibble.html"><a href="tibble.html#들어가기-2"><i class="fa fa-check"></i><b>10.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="tibble.html"><a href="tibble.html#준비하기-3"><i class="fa fa-check"></i><b>10.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="tibble.html"><a href="tibble.html#tibbles"><i class="fa fa-check"></i><b>10.2</b> tibble 생성하기</a></li>
<li class="chapter" data-level="10.3" data-path="tibble.html"><a href="tibble.html#tibble-vs.-data.frame"><i class="fa fa-check"></i><b>10.3</b> Tibble vs. data.frame</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="tibble.html"><a href="tibble.html#화면출력"><i class="fa fa-check"></i><b>10.3.1</b> 화면출력</a></li>
<li class="chapter" data-level="10.3.2" data-path="tibble.html"><a href="tibble.html#서브셋하기"><i class="fa fa-check"></i><b>10.3.2</b> 서브셋하기</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="tibble.html"><a href="tibble.html#이전-코드와-상호작용"><i class="fa fa-check"></i><b>10.4</b> 이전 코드와 상호작용</a></li>
<li class="chapter" data-level="10.5" data-path="tibble.html"><a href="tibble.html#연습문제-1"><i class="fa fa-check"></i><b>10.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>11</b> 데이터 불러오기</a>
<ul>
<li class="chapter" data-level="11.1" data-path="data-import.html"><a href="data-import.html#들어가기-3"><i class="fa fa-check"></i><b>11.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="data-import.html"><a href="data-import.html#준비하기-4"><i class="fa fa-check"></i><b>11.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="data-import.html"><a href="data-import.html#시작하기"><i class="fa fa-check"></i><b>11.2</b> 시작하기</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="data-import.html"><a href="data-import.html#베이스-r과-비교"><i class="fa fa-check"></i><b>11.2.1</b> 베이스 R과 비교</a></li>
<li class="chapter" data-level="11.2.2" data-path="data-import.html"><a href="data-import.html#연습문제-2"><i class="fa fa-check"></i><b>11.2.2</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="data-import.html"><a href="data-import.html#벡터-파싱하기"><i class="fa fa-check"></i><b>11.3</b> 벡터 파싱하기</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="data-import.html"><a href="data-import.html#숫자"><i class="fa fa-check"></i><b>11.3.1</b> 숫자</a></li>
<li class="chapter" data-level="11.3.2" data-path="data-import.html"><a href="data-import.html#readr-strings"><i class="fa fa-check"></i><b>11.3.2</b> 문자열</a></li>
<li class="chapter" data-level="11.3.3" data-path="data-import.html"><a href="data-import.html#readr-factors"><i class="fa fa-check"></i><b>11.3.3</b> 팩터형</a></li>
<li class="chapter" data-level="11.3.4" data-path="data-import.html"><a href="data-import.html#readr-datetimes"><i class="fa fa-check"></i><b>11.3.4</b> 데이트형, 데이트-타임형, 타임형</a></li>
<li class="chapter" data-level="11.3.5" data-path="data-import.html"><a href="data-import.html#연습문제-3"><i class="fa fa-check"></i><b>11.3.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="data-import.html"><a href="data-import.html#파일-파싱하기"><i class="fa fa-check"></i><b>11.4</b> 파일 파싱하기</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="data-import.html"><a href="data-import.html#전략"><i class="fa fa-check"></i><b>11.4.1</b> 전략</a></li>
<li class="chapter" data-level="11.4.2" data-path="data-import.html"><a href="data-import.html#문제점"><i class="fa fa-check"></i><b>11.4.2</b> 문제점</a></li>
<li class="chapter" data-level="11.4.3" data-path="data-import.html"><a href="data-import.html#기타-전략"><i class="fa fa-check"></i><b>11.4.3</b> 기타 전략</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="data-import.html"><a href="data-import.html#파일에-쓰기"><i class="fa fa-check"></i><b>11.5</b> 파일에 쓰기</a></li>
<li class="chapter" data-level="11.6" data-path="data-import.html"><a href="data-import.html#기타-데이터-유형"><i class="fa fa-check"></i><b>11.6</b> 기타 데이터 유형</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>12</b> 타이디 데이터</a>
<ul>
<li class="chapter" data-level="12.1" data-path="tidy-data.html"><a href="tidy-data.html#들어가기-4"><i class="fa fa-check"></i><b>12.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="tidy-data.html"><a href="tidy-data.html#준비하기-5"><i class="fa fa-check"></i><b>12.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>12.2</b> Tidy Data</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="tidy-data.html"><a href="tidy-data.html#연습문제-4"><i class="fa fa-check"></i><b>12.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="tidy-data.html"><a href="tidy-data.html#피봇팅"><i class="fa fa-check"></i><b>12.3</b> 피봇팅</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="tidy-data.html"><a href="tidy-data.html#longer"><i class="fa fa-check"></i><b>12.3.1</b> Longer</a></li>
<li class="chapter" data-level="12.3.2" data-path="tidy-data.html"><a href="tidy-data.html#wider"><i class="fa fa-check"></i><b>12.3.2</b> Wider</a></li>
<li class="chapter" data-level="12.3.3" data-path="tidy-data.html"><a href="tidy-data.html#연습문제-5"><i class="fa fa-check"></i><b>12.3.3</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="tidy-data.html"><a href="tidy-data.html#separate-과-unite"><i class="fa fa-check"></i><b>12.4</b> separate 과 unite</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="tidy-data.html"><a href="tidy-data.html#separate"><i class="fa fa-check"></i><b>12.4.1</b> separate</a></li>
<li class="chapter" data-level="12.4.2" data-path="tidy-data.html"><a href="tidy-data.html#unite"><i class="fa fa-check"></i><b>12.4.2</b> unite</a></li>
<li class="chapter" data-level="12.4.3" data-path="tidy-data.html"><a href="tidy-data.html#연습문제-6"><i class="fa fa-check"></i><b>12.4.3</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="tidy-data.html"><a href="tidy-data.html#결측값"><i class="fa fa-check"></i><b>12.5</b> 결측값</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="tidy-data.html"><a href="tidy-data.html#연습문제-7"><i class="fa fa-check"></i><b>12.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="tidy-data.html"><a href="tidy-data.html#사례-연구"><i class="fa fa-check"></i><b>12.6</b> 사례 연구</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="tidy-data.html"><a href="tidy-data.html#연습문제-8"><i class="fa fa-check"></i><b>12.6.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="tidy-data.html"><a href="tidy-data.html#타이디하지-않은-데이터"><i class="fa fa-check"></i><b>12.7</b> 타이디하지 않은 데이터</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>13</b> 관계형 데이터</a>
<ul>
<li class="chapter" data-level="13.1" data-path="relational-data.html"><a href="relational-data.html#들어가기-5"><i class="fa fa-check"></i><b>13.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="relational-data.html"><a href="relational-data.html#준비하기-6"><i class="fa fa-check"></i><b>13.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="relational-data.html"><a href="relational-data.html#nycflights13-relational"><i class="fa fa-check"></i><b>13.2</b> nycflights13</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="relational-data.html"><a href="relational-data.html#연습문제-9"><i class="fa fa-check"></i><b>13.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="relational-data.html"><a href="relational-data.html#키"><i class="fa fa-check"></i><b>13.3</b> 키</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="relational-data.html"><a href="relational-data.html#연습문제-10"><i class="fa fa-check"></i><b>13.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="relational-data.html"><a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>13.4</b> 뮤테이팅 조인</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="relational-data.html"><a href="relational-data.html#조인-이해하기"><i class="fa fa-check"></i><b>13.4.1</b> 조인 이해하기</a></li>
<li class="chapter" data-level="13.4.2" data-path="relational-data.html"><a href="relational-data.html#inner-join"><i class="fa fa-check"></i><b>13.4.2</b> 내부 조인</a></li>
<li class="chapter" data-level="13.4.3" data-path="relational-data.html"><a href="relational-data.html#outer-join"><i class="fa fa-check"></i><b>13.4.3</b> 외부 조인</a></li>
<li class="chapter" data-level="13.4.4" data-path="relational-data.html"><a href="relational-data.html#join-matches"><i class="fa fa-check"></i><b>13.4.4</b> 중복키</a></li>
<li class="chapter" data-level="13.4.5" data-path="relational-data.html"><a href="relational-data.html#join-by"><i class="fa fa-check"></i><b>13.4.5</b> 키열 정의하기</a></li>
<li class="chapter" data-level="13.4.6" data-path="relational-data.html"><a href="relational-data.html#연습문제-11"><i class="fa fa-check"></i><b>13.4.6</b> 연습문제</a></li>
<li class="chapter" data-level="13.4.7" data-path="relational-data.html"><a href="relational-data.html#기타-구현"><i class="fa fa-check"></i><b>13.4.7</b> 기타 구현</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="relational-data.html"><a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>13.5</b> 필터링 조인</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="relational-data.html"><a href="relational-data.html#연습문제-12"><i class="fa fa-check"></i><b>13.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="relational-data.html"><a href="relational-data.html#조인-문제"><i class="fa fa-check"></i><b>13.6</b> 조인 문제</a></li>
<li class="chapter" data-level="13.7" data-path="relational-data.html"><a href="relational-data.html#set-operations"><i class="fa fa-check"></i><b>13.7</b> 집합 연산</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>14</b> 문자열</a>
<ul>
<li class="chapter" data-level="14.1" data-path="strings.html"><a href="strings.html#들어가기-6"><i class="fa fa-check"></i><b>14.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="strings.html"><a href="strings.html#준비하기-7"><i class="fa fa-check"></i><b>14.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="strings.html"><a href="strings.html#strings-basics"><i class="fa fa-check"></i><b>14.2</b> 문자열 기초</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="strings.html"><a href="strings.html#문자열-길이"><i class="fa fa-check"></i><b>14.2.1</b> 문자열 길이</a></li>
<li class="chapter" data-level="14.2.2" data-path="strings.html"><a href="strings.html#문자열-결합"><i class="fa fa-check"></i><b>14.2.2</b> 문자열 결합</a></li>
<li class="chapter" data-level="14.2.3" data-path="strings.html"><a href="strings.html#문자열-서브셋하기"><i class="fa fa-check"></i><b>14.2.3</b> 문자열 서브셋하기</a></li>
<li class="chapter" data-level="14.2.4" data-path="strings.html"><a href="strings.html#로캘"><i class="fa fa-check"></i><b>14.2.4</b> 로캘</a></li>
<li class="chapter" data-level="14.2.5" data-path="strings.html"><a href="strings.html#연습문제-13"><i class="fa fa-check"></i><b>14.2.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="strings.html"><a href="strings.html#정규표현식을-이용한-패턴-매칭"><i class="fa fa-check"></i><b>14.3</b> 정규표현식을 이용한 패턴 매칭</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="strings.html"><a href="strings.html#기초-매칭"><i class="fa fa-check"></i><b>14.3.1</b> 기초 매칭</a></li>
<li class="chapter" data-level="14.3.2" data-path="strings.html"><a href="strings.html#앵커"><i class="fa fa-check"></i><b>14.3.2</b> 앵커</a></li>
<li class="chapter" data-level="14.3.3" data-path="strings.html"><a href="strings.html#문자-클래스와-대체구문"><i class="fa fa-check"></i><b>14.3.3</b> 문자 클래스와 대체구문</a></li>
<li class="chapter" data-level="14.3.4" data-path="strings.html"><a href="strings.html#반복"><i class="fa fa-check"></i><b>14.3.4</b> 반복</a></li>
<li class="chapter" data-level="14.3.5" data-path="strings.html"><a href="strings.html#그룹화와-역참조"><i class="fa fa-check"></i><b>14.3.5</b> 그룹화와 역참조</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="strings.html"><a href="strings.html#도구"><i class="fa fa-check"></i><b>14.4</b> 도구</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="strings.html"><a href="strings.html#매칭-탐지"><i class="fa fa-check"></i><b>14.4.1</b> 매칭 탐지</a></li>
<li class="chapter" data-level="14.4.2" data-path="strings.html"><a href="strings.html#매칭-추출"><i class="fa fa-check"></i><b>14.4.2</b> 매칭 추출</a></li>
<li class="chapter" data-level="14.4.3" data-path="strings.html"><a href="strings.html#그룹화-매칭"><i class="fa fa-check"></i><b>14.4.3</b> 그룹화 매칭</a></li>
<li class="chapter" data-level="14.4.4" data-path="strings.html"><a href="strings.html#매칭-치환"><i class="fa fa-check"></i><b>14.4.4</b> 매칭 치환</a></li>
<li class="chapter" data-level="14.4.5" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>14.4.5</b> Splitting</a></li>
<li class="chapter" data-level="14.4.6" data-path="strings.html"><a href="strings.html#매치-찾기"><i class="fa fa-check"></i><b>14.4.6</b> 매치 찾기</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="strings.html"><a href="strings.html#기타-패턴-유형"><i class="fa fa-check"></i><b>14.5</b> 기타 패턴 유형</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="strings.html"><a href="strings.html#연습문제-24"><i class="fa fa-check"></i><b>14.5.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="strings.html"><a href="strings.html#정규표현식의-기타-용도"><i class="fa fa-check"></i><b>14.6</b> 정규표현식의 기타 용도</a></li>
<li class="chapter" data-level="14.7" data-path="strings.html"><a href="strings.html#stringi"><i class="fa fa-check"></i><b>14.7</b> stringi</a>
<ul>
<li class="chapter" data-level="14.7.1" data-path="strings.html"><a href="strings.html#연습문제-25"><i class="fa fa-check"></i><b>14.7.1</b> 연습문제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>15</b> 팩터형</a>
<ul>
<li class="chapter" data-level="15.1" data-path="factors.html"><a href="factors.html#들어가기-7"><i class="fa fa-check"></i><b>15.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="factors.html"><a href="factors.html#준비하기-8"><i class="fa fa-check"></i><b>15.1.1</b> 준비하기</a></li>
<li class="chapter" data-level="15.1.2" data-path="factors.html"><a href="factors.html#더-배우기"><i class="fa fa-check"></i><b>15.1.2</b> 더 배우기</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="factors.html"><a href="factors.html#팩터형-생성하기"><i class="fa fa-check"></i><b>15.2</b> 팩터형 생성하기</a></li>
<li class="chapter" data-level="15.3" data-path="factors.html"><a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>15.3</b> General Social Survey</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="factors.html"><a href="factors.html#연습문제-26"><i class="fa fa-check"></i><b>15.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="factors.html"><a href="factors.html#팩터-순서-수정하기"><i class="fa fa-check"></i><b>15.4</b> 팩터 순서 수정하기</a>
<ul>
<li class="chapter" data-level="15.4.1" data-path="factors.html"><a href="factors.html#연습문제-27"><i class="fa fa-check"></i><b>15.4.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="factors.html"><a href="factors.html#팩터-레벨-수정하기"><i class="fa fa-check"></i><b>15.5</b> 팩터 레벨 수정하기</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="factors.html"><a href="factors.html#연습문제-28"><i class="fa fa-check"></i><b>15.5.1</b> 연습문제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>16</b> 날짜와 시간</a>
<ul>
<li class="chapter" data-level="16.1" data-path="dates-and-times.html"><a href="dates-and-times.html#들어가기-8"><i class="fa fa-check"></i><b>16.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="dates-and-times.html"><a href="dates-and-times.html#준비하기-9"><i class="fa fa-check"></i><b>16.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="dates-and-times.html"><a href="dates-and-times.html#날짜시간-생성하기"><i class="fa fa-check"></i><b>16.2</b> 날짜/시간 생성하기</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="dates-and-times.html"><a href="dates-and-times.html#문자열에서-생성"><i class="fa fa-check"></i><b>16.2.1</b> 문자열에서 생성</a></li>
<li class="chapter" data-level="16.2.2" data-path="dates-and-times.html"><a href="dates-and-times.html#개별-구성요소에서-생성"><i class="fa fa-check"></i><b>16.2.2</b> 개별 구성요소에서 생성</a></li>
<li class="chapter" data-level="16.2.3" data-path="dates-and-times.html"><a href="dates-and-times.html#기타-유형에서-생성"><i class="fa fa-check"></i><b>16.2.3</b> 기타 유형에서 생성</a></li>
<li class="chapter" data-level="16.2.4" data-path="dates-and-times.html"><a href="dates-and-times.html#연습문제-29"><i class="fa fa-check"></i><b>16.2.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="dates-and-times.html"><a href="dates-and-times.html#데이트-타임형-구성요소"><i class="fa fa-check"></i><b>16.3</b> 데이트-타임형 구성요소</a>
<ul>
<li class="chapter" data-level="16.3.1" data-path="dates-and-times.html"><a href="dates-and-times.html#구성요소-가져오기"><i class="fa fa-check"></i><b>16.3.1</b> 구성요소 가져오기</a></li>
<li class="chapter" data-level="16.3.2" data-path="dates-and-times.html"><a href="dates-and-times.html#반올림"><i class="fa fa-check"></i><b>16.3.2</b> 반올림</a></li>
<li class="chapter" data-level="16.3.3" data-path="dates-and-times.html"><a href="dates-and-times.html#구성요소-설정"><i class="fa fa-check"></i><b>16.3.3</b> 구성요소 설정</a></li>
<li class="chapter" data-level="16.3.4" data-path="dates-and-times.html"><a href="dates-and-times.html#연습문제-30"><i class="fa fa-check"></i><b>16.3.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="dates-and-times.html"><a href="dates-and-times.html#시간-범위"><i class="fa fa-check"></i><b>16.4</b> 시간 범위</a>
<ul>
<li class="chapter" data-level="16.4.1" data-path="dates-and-times.html"><a href="dates-and-times.html#듀레이션형"><i class="fa fa-check"></i><b>16.4.1</b> 듀레이션형</a></li>
<li class="chapter" data-level="16.4.2" data-path="dates-and-times.html"><a href="dates-and-times.html#피리어드형"><i class="fa fa-check"></i><b>16.4.2</b> 피리어드형</a></li>
<li class="chapter" data-level="16.4.3" data-path="dates-and-times.html"><a href="dates-and-times.html#인터벌형"><i class="fa fa-check"></i><b>16.4.3</b> 인터벌형</a></li>
<li class="chapter" data-level="16.4.4" data-path="dates-and-times.html"><a href="dates-and-times.html#요약"><i class="fa fa-check"></i><b>16.4.4</b> 요약</a></li>
<li class="chapter" data-level="16.4.5" data-path="dates-and-times.html"><a href="dates-and-times.html#연습문제-31"><i class="fa fa-check"></i><b>16.4.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="16.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>16.5</b> 시간대</a></li>
</ul></li>
<li class="part"><span><b>III 프로그래밍</b></span></li>
<li class="chapter" data-level="17" data-path="program-intro.html"><a href="program-intro.html"><i class="fa fa-check"></i><b>17</b> 소개</a>
<ul>
<li class="chapter" data-level="17.1" data-path="program-intro.html"><a href="program-intro.html#learning-more-1"><i class="fa fa-check"></i><b>17.1</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="Pipes.html"><a href="Pipes.html"><i class="fa fa-check"></i><b>18</b> 파이프</a>
<ul>
<li class="chapter" data-level="18.1" data-path="Pipes.html"><a href="Pipes.html#들어가기-9"><i class="fa fa-check"></i><b>18.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="Pipes.html"><a href="Pipes.html#준비하기-10"><i class="fa fa-check"></i><b>18.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="Pipes.html"><a href="Pipes.html#파이프-대안"><i class="fa fa-check"></i><b>18.2</b> 파이프 대안</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="Pipes.html"><a href="Pipes.html#중간단계-이용"><i class="fa fa-check"></i><b>18.2.1</b> 중간단계 이용</a></li>
<li class="chapter" data-level="18.2.2" data-path="Pipes.html"><a href="Pipes.html#원본-덮어쓰기"><i class="fa fa-check"></i><b>18.2.2</b> 원본 덮어쓰기</a></li>
<li class="chapter" data-level="18.2.3" data-path="Pipes.html"><a href="Pipes.html#함수-작성"><i class="fa fa-check"></i><b>18.2.3</b> 함수 작성</a></li>
<li class="chapter" data-level="18.2.4" data-path="Pipes.html"><a href="Pipes.html#파이프-사용"><i class="fa fa-check"></i><b>18.2.4</b> 파이프 사용</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="Pipes.html"><a href="Pipes.html#파이프를-사용하지-않아야-할-경우"><i class="fa fa-check"></i><b>18.3</b> 파이프를 사용하지 않아야 할 경우</a></li>
<li class="chapter" data-level="18.4" data-path="Pipes.html"><a href="Pipes.html#magrittr-의-기타-도구"><i class="fa fa-check"></i><b>18.4</b> magrittr 의 기타 도구</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>19</b> 함수</a>
<ul>
<li class="chapter" data-level="19.1" data-path="functions.html"><a href="functions.html#들어가기-10"><i class="fa fa-check"></i><b>19.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="functions.html"><a href="functions.html#준비하기-11"><i class="fa fa-check"></i><b>19.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="functions.html"><a href="functions.html#함수를-언제-작성해야-하나"><i class="fa fa-check"></i><b>19.2</b> 함수를 언제 작성해야 하나?</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="functions.html"><a href="functions.html#연습문제-32"><i class="fa fa-check"></i><b>19.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="functions.html"><a href="functions.html#함수는-사람과-컴퓨터를-위한-것"><i class="fa fa-check"></i><b>19.3</b> 함수는 사람과 컴퓨터를 위한 것</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="functions.html"><a href="functions.html#연습문제-33"><i class="fa fa-check"></i><b>19.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="functions.html"><a href="functions.html#조건부-실행"><i class="fa fa-check"></i><b>19.4</b> 조건부 실행</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="functions.html"><a href="functions.html#조건문"><i class="fa fa-check"></i><b>19.4.1</b> 조건문</a></li>
<li class="chapter" data-level="19.4.2" data-path="functions.html"><a href="functions.html#다중-조건"><i class="fa fa-check"></i><b>19.4.2</b> 다중 조건</a></li>
<li class="chapter" data-level="19.4.3" data-path="functions.html"><a href="functions.html#코드-스타일"><i class="fa fa-check"></i><b>19.4.3</b> 코드 스타일</a></li>
<li class="chapter" data-level="19.4.4" data-path="functions.html"><a href="functions.html#연습문제-34"><i class="fa fa-check"></i><b>19.4.4</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="functions.html"><a href="functions.html#함수-인수"><i class="fa fa-check"></i><b>19.5</b> 함수 인수</a>
<ul>
<li class="chapter" data-level="19.5.1" data-path="functions.html"><a href="functions.html#이름-정하기"><i class="fa fa-check"></i><b>19.5.1</b> 이름 정하기</a></li>
<li class="chapter" data-level="19.5.2" data-path="functions.html"><a href="functions.html#값-확인하기"><i class="fa fa-check"></i><b>19.5.2</b> 값 확인하기</a></li>
<li class="chapter" data-level="19.5.3" data-path="functions.html"><a href="functions.html#점-점-점"><i class="fa fa-check"></i><b>19.5.3</b> 점-점-점 (…)</a></li>
<li class="chapter" data-level="19.5.4" data-path="functions.html"><a href="functions.html#지연-평가"><i class="fa fa-check"></i><b>19.5.4</b> 지연 평가</a></li>
<li class="chapter" data-level="19.5.5" data-path="functions.html"><a href="functions.html#연습문제-35"><i class="fa fa-check"></i><b>19.5.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="19.6" data-path="functions.html"><a href="functions.html#반환값"><i class="fa fa-check"></i><b>19.6</b> 반환값</a>
<ul>
<li class="chapter" data-level="19.6.1" data-path="functions.html"><a href="functions.html#명시적-반환문"><i class="fa fa-check"></i><b>19.6.1</b> 명시적 반환문</a></li>
<li class="chapter" data-level="19.6.2" data-path="functions.html"><a href="functions.html#파이핑-가능한-함수-작성하기"><i class="fa fa-check"></i><b>19.6.2</b> 파이핑 가능한 함수 작성하기</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="functions.html"><a href="functions.html#환경"><i class="fa fa-check"></i><b>19.7</b> 환경</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>20</b> 벡터</a>
<ul>
<li class="chapter" data-level="20.1" data-path="vectors.html"><a href="vectors.html#들어가기-11"><i class="fa fa-check"></i><b>20.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="20.1.1" data-path="vectors.html"><a href="vectors.html#준비하기-12"><i class="fa fa-check"></i><b>20.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="vectors.html"><a href="vectors.html#벡터-기본-사항"><i class="fa fa-check"></i><b>20.2</b> 벡터 기본 사항</a></li>
<li class="chapter" data-level="20.3" data-path="vectors.html"><a href="vectors.html#원자-벡터의-주요-유형"><i class="fa fa-check"></i><b>20.3</b> 원자 벡터의 주요 유형</a>
<ul>
<li class="chapter" data-level="20.3.1" data-path="vectors.html"><a href="vectors.html#논리형"><i class="fa fa-check"></i><b>20.3.1</b> 논리형</a></li>
<li class="chapter" data-level="20.3.2" data-path="vectors.html"><a href="vectors.html#수치형"><i class="fa fa-check"></i><b>20.3.2</b> 수치형</a></li>
<li class="chapter" data-level="20.3.3" data-path="vectors.html"><a href="vectors.html#문자형"><i class="fa fa-check"></i><b>20.3.3</b> 문자형</a></li>
<li class="chapter" data-level="20.3.4" data-path="vectors.html"><a href="vectors.html#결측값-1"><i class="fa fa-check"></i><b>20.3.4</b> 결측값</a></li>
<li class="chapter" data-level="20.3.5" data-path="vectors.html"><a href="vectors.html#연습문제-36"><i class="fa fa-check"></i><b>20.3.5</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="vectors.html"><a href="vectors.html#원자벡터-이용하기"><i class="fa fa-check"></i><b>20.4</b> 원자벡터 이용하기</a>
<ul>
<li class="chapter" data-level="20.4.1" data-path="vectors.html"><a href="vectors.html#강제변환"><i class="fa fa-check"></i><b>20.4.1</b> 강제변환</a></li>
<li class="chapter" data-level="20.4.2" data-path="vectors.html"><a href="vectors.html#테스트-함수"><i class="fa fa-check"></i><b>20.4.2</b> 테스트 함수</a></li>
<li class="chapter" data-level="20.4.3" data-path="vectors.html"><a href="vectors.html#스칼라와-재활용-규칙"><i class="fa fa-check"></i><b>20.4.3</b> 스칼라와 재활용 규칙</a></li>
<li class="chapter" data-level="20.4.4" data-path="vectors.html"><a href="vectors.html#벡터-이름-짓기"><i class="fa fa-check"></i><b>20.4.4</b> 벡터 이름 짓기</a></li>
<li class="chapter" data-level="20.4.5" data-path="vectors.html"><a href="vectors.html#vector-subsetting"><i class="fa fa-check"></i><b>20.4.5</b> 서브셋하기</a></li>
<li class="chapter" data-level="20.4.6" data-path="vectors.html"><a href="vectors.html#연습문제-37"><i class="fa fa-check"></i><b>20.4.6</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="vectors.html"><a href="vectors.html#lists"><i class="fa fa-check"></i><b>20.5</b> 재귀 벡터 (리스트)</a>
<ul>
<li class="chapter" data-level="20.5.1" data-path="vectors.html"><a href="vectors.html#리스트-시각화"><i class="fa fa-check"></i><b>20.5.1</b> 리스트 시각화</a></li>
<li class="chapter" data-level="20.5.2" data-path="vectors.html"><a href="vectors.html#서브셋하기-1"><i class="fa fa-check"></i><b>20.5.2</b> 서브셋하기</a></li>
<li class="chapter" data-level="20.5.3" data-path="vectors.html"><a href="vectors.html#후추-리스트"><i class="fa fa-check"></i><b>20.5.3</b> 후추 리스트</a></li>
<li class="chapter" data-level="20.5.4" data-path="vectors.html"><a href="vectors.html#exercises-16"><i class="fa fa-check"></i><b>20.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="vectors.html"><a href="vectors.html#attributes"><i class="fa fa-check"></i><b>20.6</b> Attributes</a></li>
<li class="chapter" data-level="20.7" data-path="vectors.html"><a href="vectors.html#augmented-vectors"><i class="fa fa-check"></i><b>20.7</b> Augmented vectors</a>
<ul>
<li class="chapter" data-level="20.7.1" data-path="vectors.html"><a href="vectors.html#factors-1"><i class="fa fa-check"></i><b>20.7.1</b> Factors</a></li>
<li class="chapter" data-level="20.7.2" data-path="vectors.html"><a href="vectors.html#dates-and-date-times"><i class="fa fa-check"></i><b>20.7.2</b> Dates and date-times</a></li>
<li class="chapter" data-level="20.7.3" data-path="vectors.html"><a href="vectors.html#tibbles-1"><i class="fa fa-check"></i><b>20.7.3</b> Tibbles</a></li>
<li class="chapter" data-level="20.7.4" data-path="vectors.html"><a href="vectors.html#exercises-17"><i class="fa fa-check"></i><b>20.7.4</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>21</b> 반복</a>
<ul>
<li class="chapter" data-level="21.1" data-path="iteration.html"><a href="iteration.html#들어가기-12"><i class="fa fa-check"></i><b>21.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="iteration.html"><a href="iteration.html#준비하기-13"><i class="fa fa-check"></i><b>21.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="iteration.html"><a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>21.2</b> For loops</a>
<ul>
<li class="chapter" data-level="21.2.1" data-path="iteration.html"><a href="iteration.html#exercises-18"><i class="fa fa-check"></i><b>21.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="iteration.html"><a href="iteration.html#for-loop-variations"><i class="fa fa-check"></i><b>21.3</b> For loop variations</a>
<ul>
<li class="chapter" data-level="21.3.1" data-path="iteration.html"><a href="iteration.html#modifying-an-existing-object"><i class="fa fa-check"></i><b>21.3.1</b> Modifying an existing object</a></li>
<li class="chapter" data-level="21.3.2" data-path="iteration.html"><a href="iteration.html#looping-patterns"><i class="fa fa-check"></i><b>21.3.2</b> Looping patterns</a></li>
<li class="chapter" data-level="21.3.3" data-path="iteration.html"><a href="iteration.html#unknown-output-length"><i class="fa fa-check"></i><b>21.3.3</b> Unknown output length</a></li>
<li class="chapter" data-level="21.3.4" data-path="iteration.html"><a href="iteration.html#unknown-sequence-length"><i class="fa fa-check"></i><b>21.3.4</b> Unknown sequence length</a></li>
<li class="chapter" data-level="21.3.5" data-path="iteration.html"><a href="iteration.html#exercises-19"><i class="fa fa-check"></i><b>21.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.4" data-path="iteration.html"><a href="iteration.html#for-loops-vs.-functionals"><i class="fa fa-check"></i><b>21.4</b> For loops vs. functionals</a>
<ul>
<li class="chapter" data-level="21.4.1" data-path="iteration.html"><a href="iteration.html#exercises-20"><i class="fa fa-check"></i><b>21.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.5" data-path="iteration.html"><a href="iteration.html#the-map-functions"><i class="fa fa-check"></i><b>21.5</b> The map functions</a>
<ul>
<li class="chapter" data-level="21.5.1" data-path="iteration.html"><a href="iteration.html#단축어"><i class="fa fa-check"></i><b>21.5.1</b> 단축어</a></li>
<li class="chapter" data-level="21.5.2" data-path="iteration.html"><a href="iteration.html#base-r"><i class="fa fa-check"></i><b>21.5.2</b> Base R</a></li>
<li class="chapter" data-level="21.5.3" data-path="iteration.html"><a href="iteration.html#exercises-21"><i class="fa fa-check"></i><b>21.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.6" data-path="iteration.html"><a href="iteration.html#dealing-with-failure"><i class="fa fa-check"></i><b>21.6</b> Dealing with failure</a></li>
<li class="chapter" data-level="21.7" data-path="iteration.html"><a href="iteration.html#mapping-over-multiple-arguments"><i class="fa fa-check"></i><b>21.7</b> Mapping over multiple arguments</a>
<ul>
<li class="chapter" data-level="21.7.1" data-path="iteration.html"><a href="iteration.html#invoking-different-functions"><i class="fa fa-check"></i><b>21.7.1</b> Invoking different functions</a></li>
</ul></li>
<li class="chapter" data-level="21.8" data-path="iteration.html"><a href="iteration.html#walk"><i class="fa fa-check"></i><b>21.8</b> Walk</a></li>
<li class="chapter" data-level="21.9" data-path="iteration.html"><a href="iteration.html#other-patterns-of-for-loops"><i class="fa fa-check"></i><b>21.9</b> Other patterns of for loops</a>
<ul>
<li class="chapter" data-level="21.9.1" data-path="iteration.html"><a href="iteration.html#predicate-functions"><i class="fa fa-check"></i><b>21.9.1</b> Predicate functions</a></li>
<li class="chapter" data-level="21.9.2" data-path="iteration.html"><a href="iteration.html#reduce-and-accumulate"><i class="fa fa-check"></i><b>21.9.2</b> Reduce and accumulate</a></li>
<li class="chapter" data-level="21.9.3" data-path="iteration.html"><a href="iteration.html#exercises-22"><i class="fa fa-check"></i><b>21.9.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.10" data-path="iteration.html"><a href="iteration.html#case-study"><i class="fa fa-check"></i><b>21.10</b> Case study</a></li>
</ul></li>
<li class="part"><span><b>IV 의사소통하기</b></span></li>
<li class="chapter" data-level="22" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>22</b> 소개</a></li>
<li class="chapter" data-level="23" data-path="rmarkdown.html"><a href="rmarkdown.html"><i class="fa fa-check"></i><b>23</b> R 마크다운</a>
<ul>
<li class="chapter" data-level="23.1" data-path="rmarkdown.html"><a href="rmarkdown.html#들어가기-13"><i class="fa fa-check"></i><b>23.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="23.1.1" data-path="rmarkdown.html"><a href="rmarkdown.html#준비하기-14"><i class="fa fa-check"></i><b>23.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="rmarkdown.html"><a href="rmarkdown.html#r-마크다운-기초"><i class="fa fa-check"></i><b>23.2</b> R 마크다운 기초</a>
<ul>
<li class="chapter" data-level="23.2.1" data-path="rmarkdown.html"><a href="rmarkdown.html#연습문제-38"><i class="fa fa-check"></i><b>23.2.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="rmarkdown.html"><a href="rmarkdown.html#마크다운으로-텍스트-서식-지정하기"><i class="fa fa-check"></i><b>23.3</b> 마크다운으로 텍스트 서식 지정하기</a>
<ul>
<li class="chapter" data-level="23.3.1" data-path="rmarkdown.html"><a href="rmarkdown.html#연습문제-39"><i class="fa fa-check"></i><b>23.3.1</b> 연습문제</a></li>
</ul></li>
<li class="chapter" data-level="23.4" data-path="rmarkdown.html"><a href="rmarkdown.html#코드-청크"><i class="fa fa-check"></i><b>23.4</b> 코드 청크</a>
<ul>
<li class="chapter" data-level="23.4.1" data-path="rmarkdown.html"><a href="rmarkdown.html#청크-이름"><i class="fa fa-check"></i><b>23.4.1</b> 청크 이름</a></li>
<li class="chapter" data-level="23.4.2" data-path="rmarkdown.html"><a href="rmarkdown.html#청크-옵션"><i class="fa fa-check"></i><b>23.4.2</b> 청크 옵션</a></li>
<li class="chapter" data-level="23.4.3" data-path="rmarkdown.html"><a href="rmarkdown.html#표"><i class="fa fa-check"></i><b>23.4.3</b> 표</a></li>
<li class="chapter" data-level="23.4.4" data-path="rmarkdown.html"><a href="rmarkdown.html#캐싱"><i class="fa fa-check"></i><b>23.4.4</b> 캐싱</a></li>
<li class="chapter" data-level="23.4.5" data-path="rmarkdown.html"><a href="rmarkdown.html#전역-옵션"><i class="fa fa-check"></i><b>23.4.5</b> 전역 옵션</a></li>
<li class="chapter" data-level="23.4.6" data-path="rmarkdown.html"><a href="rmarkdown.html#inline-code"><i class="fa fa-check"></i><b>23.4.6</b> Inline code</a></li>
<li class="chapter" data-level="23.4.7" data-path="rmarkdown.html"><a href="rmarkdown.html#exercises-23"><i class="fa fa-check"></i><b>23.4.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.5" data-path="rmarkdown.html"><a href="rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>23.5</b> Troubleshooting</a></li>
<li class="chapter" data-level="23.6" data-path="rmarkdown.html"><a href="rmarkdown.html#yaml-header"><i class="fa fa-check"></i><b>23.6</b> YAML header</a>
<ul>
<li class="chapter" data-level="23.6.1" data-path="rmarkdown.html"><a href="rmarkdown.html#parameters"><i class="fa fa-check"></i><b>23.6.1</b> Parameters</a></li>
<li class="chapter" data-level="23.6.2" data-path="rmarkdown.html"><a href="rmarkdown.html#bibliographies-and-citations"><i class="fa fa-check"></i><b>23.6.2</b> Bibliographies and Citations</a></li>
</ul></li>
<li class="chapter" data-level="23.7" data-path="rmarkdown.html"><a href="rmarkdown.html#learning-more-2"><i class="fa fa-check"></i><b>23.7</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>24</b> 그래프를 통한 의사소통</a>
<ul>
<li class="chapter" data-level="24.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#들어가기-14"><i class="fa fa-check"></i><b>24.1</b> 들어가기</a>
<ul>
<li class="chapter" data-level="24.1.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#준비하기-15"><i class="fa fa-check"></i><b>24.1.1</b> 준비하기</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>24.2</b> Label</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-24"><i class="fa fa-check"></i><b>24.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>24.3</b> Annotations</a>
<ul>
<li class="chapter" data-level="24.3.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-25"><i class="fa fa-check"></i><b>24.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>24.4</b> Scales</a>
<ul>
<li class="chapter" data-level="24.4.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#axis-ticks-and-legend-keys"><i class="fa fa-check"></i><b>24.4.1</b> Axis ticks and legend keys</a></li>
<li class="chapter" data-level="24.4.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#legend-layout"><i class="fa fa-check"></i><b>24.4.2</b> Legend layout</a></li>
<li class="chapter" data-level="24.4.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#replacing-a-scale"><i class="fa fa-check"></i><b>24.4.3</b> Replacing a scale</a></li>
<li class="chapter" data-level="24.4.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-26"><i class="fa fa-check"></i><b>24.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#zooming"><i class="fa fa-check"></i><b>24.5</b> Zooming</a></li>
<li class="chapter" data-level="24.6" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#themes"><i class="fa fa-check"></i><b>24.6</b> Themes</a></li>
<li class="chapter" data-level="24.7" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#saving-your-plots"><i class="fa fa-check"></i><b>24.7</b> Saving your plots</a>
<ul>
<li class="chapter" data-level="24.7.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#figure-sizing"><i class="fa fa-check"></i><b>24.7.1</b> Figure sizing</a></li>
<li class="chapter" data-level="24.7.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#other-important-options"><i class="fa fa-check"></i><b>24.7.2</b> Other important options</a></li>
</ul></li>
<li class="chapter" data-level="24.8" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#learning-more-3"><i class="fa fa-check"></i><b>24.8</b> Learning more</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html"><i class="fa fa-check"></i><b>25</b> R 마크다운 유형</a>
<ul>
<li class="chapter" data-level="25.1" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#들어가기-15"><i class="fa fa-check"></i><b>25.1</b> 들어가기</a></li>
<li class="chapter" data-level="25.2" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#출력-옵션"><i class="fa fa-check"></i><b>25.2</b> 출력 옵션</a></li>
<li class="chapter" data-level="25.3" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#document"><i class="fa fa-check"></i><b>25.3</b> Document</a></li>
<li class="chapter" data-level="25.4" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#notebook"><i class="fa fa-check"></i><b>25.4</b> Notebook</a></li>
<li class="chapter" data-level="25.5" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#presentation"><i class="fa fa-check"></i><b>25.5</b> Presentation</a></li>
<li class="chapter" data-level="25.6" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#dashboard"><i class="fa fa-check"></i><b>25.6</b> Dashboard</a></li>
<li class="chapter" data-level="25.7" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#대화형-동작"><i class="fa fa-check"></i><b>25.7</b> 대화형 동작</a>
<ul>
<li class="chapter" data-level="25.7.1" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#htmlwidgets"><i class="fa fa-check"></i><b>25.7.1</b> htmlwidgets</a></li>
<li class="chapter" data-level="25.7.2" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#shiny"><i class="fa fa-check"></i><b>25.7.2</b> Shiny</a></li>
</ul></li>
<li class="chapter" data-level="25.8" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#website"><i class="fa fa-check"></i><b>25.8</b> Website</a></li>
<li class="chapter" data-level="25.9" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#other-formats"><i class="fa fa-check"></i><b>25.9</b> Other formats</a></li>
<li class="chapter" data-level="25.10" data-path="rmarkdown-formats.html"><a href="rmarkdown-formats.html#더-배우기-1"><i class="fa fa-check"></i><b>25.10</b> 더 배우기</a></li>
</ul></li>
<li class="chapter" data-level="26" data-path="rmarkdown-workflow.html"><a href="rmarkdown-workflow.html"><i class="fa fa-check"></i><b>26</b> R 마크다운 워크플로</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 을 활용한 데이터과학</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="iteration" class="section level1" number="21">
<h1><span class="header-section-number">21</span> 반복</h1>
<div id="들어가기-12" class="section level2" number="21.1">
<h2><span class="header-section-number">21.1</span> 들어가기</h2>
<p><a href="functions.html#functions">19</a> 에서는 복사하여 붙여넣기 대신 함수를 작성하여 코드의 복제를 줄이는 것이 얼마나 중요한지에 대해 살펴보았다. 코드 중복을 줄이면 크게 세 가지 이점이 있다.</p>
<ol style="list-style-type: decimal">
<li><p>동일한 부분이 아니라, 차이가 나는 부분이 잘 보이기 때문에 코드의 의도를 확인하기 쉽다.</p></li>
<li><p>요구사항가 바뀌었을 때 쉽게 대응할 수 있다.
요구사항이 변경되면 복사하고 붙여넣은 모든 장소를 기억해가며 변경하는 대신, 한 곳만 변경하면 된다.</p></li>
<li><p>코드 라인이 여러 곳에 사용되었기 때문에 버그가 발생할 확률이 줄어든다.</p></li>
</ol>
<p>중복을 줄일 수 있는 첫번째 방법은 함수를 사용하는 것이다. 함수는 반복되는 코드 패턴을 식별하여 독립적인 조각을 재사용하고 업데이트할 수 있게 코드를 추출한다.
중복을 줄일 수 있는 다른 방법은 <strong>반복</strong>(iteration) 을 사용하는 것이다. 반복이 유용한 경우는 다양한 입력에 대해 동일한 작업을 수행해야 하는 경우, 즉 다른 열이나 다른 데이터셋에 동일한 연산을 반복해야 하는 경우이다.
이 장에서는 명령형 프로그래밍과 함수형 프로그래밍이라는 두 가지 중요한 반복 패러다임에 대해 학습한다.
명령형에서는 대표적으로 for 루프와 while 루프가 있다. 이것들은 반복작업이 명시적이어서 작업내용이 명확하므로, 이것들부터 배우는 것이 좋다.
그러나 for 루프는 장황하고 모든 for 루프마다 부수적인 코드(bookkeeping code) 가 중복된다. 함수형 프로그래밍(Functional Programming, FP) 은 이 중복된 코드를 추출하는 도구를 제공하므로, 루프 패턴마다 공통된 함수를 갖는다.
함수형 프로그래밍의 어휘에 익숙하게 되면 짧은 코드로, 쉽게 그리고 오류를 덜 발생시키면서, 많은 반복 문제를 해결할 수 있다.</p>
<div id="준비하기-13" class="section level3" number="21.1.1">
<h3><span class="header-section-number">21.1.1</span> 준비하기</h3>
<p>Once you’ve mastered the for loops provided by base R, you’ll learn some of the powerful programming tools provided by purrr, one of the tidyverse core packages.</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="iteration.html#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</div>
</div>
<div id="for-loops" class="section level2" number="21.2">
<h2><span class="header-section-number">21.2</span> For loops</h2>
<p>Imagine we have this simple tibble:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="iteration.html#cb519-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb519-2"><a href="iteration.html#cb519-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb519-3"><a href="iteration.html#cb519-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb519-4"><a href="iteration.html#cb519-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb519-5"><a href="iteration.html#cb519-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb519-6"><a href="iteration.html#cb519-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>We want to compute the median of each column.
You <em>could</em> do with copy-and-paste:</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="iteration.html#cb520-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>a)</span>
<span id="cb520-2"><a href="iteration.html#cb520-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.246</span></span>
<span id="cb520-3"><a href="iteration.html#cb520-3" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>b)</span>
<span id="cb520-4"><a href="iteration.html#cb520-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.287</span></span>
<span id="cb520-5"><a href="iteration.html#cb520-5" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>c)</span>
<span id="cb520-6"><a href="iteration.html#cb520-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.0567</span></span>
<span id="cb520-7"><a href="iteration.html#cb520-7" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(df<span class="sc">$</span>d)</span>
<span id="cb520-8"><a href="iteration.html#cb520-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.144</span></span></code></pre></div>
<p>But that breaks our rule of thumb: never copy and paste more than twice.
Instead, we could use a for loop:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="iteration.html#cb521-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">ncol</span>(df))  <span class="co"># 1. output</span></span>
<span id="cb521-2"><a href="iteration.html#cb521-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {            <span class="co"># 2. sequence</span></span>
<span id="cb521-3"><a href="iteration.html#cb521-3" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])      <span class="co"># 3. body</span></span>
<span id="cb521-4"><a href="iteration.html#cb521-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb521-5"><a href="iteration.html#cb521-5" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb521-6"><a href="iteration.html#cb521-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.2458 -0.2873 -0.0567  0.1443</span></span></code></pre></div>
<p>Every for loop has three components:</p>
<ol style="list-style-type: decimal">
<li><p>The <strong>output</strong>: <code>output &lt;- vector("double", length(x))</code>.
Before you start the loop, you must always allocate sufficient space for the output.
This is very important for efficiency: if you grow the for loop at each iteration using <code>c()</code> (for example), your for loop will be very slow.</p>
<p>A general way of creating an empty vector of given length is the <code>vector()</code> function.
It has two arguments: the type of the vector (“logical”, “integer”, “double”, “character”, etc) and the length of the vector.</p></li>
<li><p>The <strong>sequence</strong>: <code>i in seq_along(df)</code>.
This determines what to loop over: each run of the for loop will assign <code>i</code> to a different value from <code>seq_along(df)</code>.
It’s useful to think of <code>i</code> as a pronoun, like “it”.</p>
<p>You might not have seen <code>seq_along()</code> before.
It’s a safe version of the familiar <code>1:length(l)</code>, with an important difference: if you have a zero-length vector, <code>seq_along()</code> does the right thing:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="iteration.html#cb522-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="dv">0</span>)</span>
<span id="cb522-2"><a href="iteration.html#cb522-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(y)</span>
<span id="cb522-3"><a href="iteration.html#cb522-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; integer(0)</span></span>
<span id="cb522-4"><a href="iteration.html#cb522-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(y)</span>
<span id="cb522-5"><a href="iteration.html#cb522-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1 0</span></span></code></pre></div>
<p>You probably won’t create a zero-length vector deliberately, but it’s easy to create them accidentally.
If you use <code>1:length(x)</code> instead of <code>seq_along(x)</code>, you’re likely to get a confusing error message.</p></li>
<li><p>The <strong>body</strong>: <code>output[[i]] &lt;- median(df[[i]])</code>.
This is the code that does the work.
It’s run repeatedly, each time with a different value for <code>i</code>.
The first iteration will run <code>output[[1]] &lt;- median(df[[1]])</code>, the second will run <code>output[[2]] &lt;- median(df[[2]])</code>, and so on.</p></li>
</ol>
<p>That’s all there is to the for loop!
Now is a good time to practice creating some basic (and not so basic) for loops using the exercises below.
Then we’ll move on some variations of the for loop that help you solve other problems that will crop up in practice.</p>
<div id="exercises-18" class="section level3" number="21.2.1">
<h3><span class="header-section-number">21.2.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Write for loops to:</p>
<ol style="list-style-type: lower-alpha">
<li>Compute the mean of every column in <code>mtcars</code>.</li>
<li>Determine the type of each column in <code>nycflights13::flights</code>.</li>
<li>Compute the number of unique values in each column of <code>palmerpenguins::penguins</code>.</li>
<li>Generate 10 random normals from distributions with means of -10, 0, 10, and 100.</li>
</ol>
<p>Think about the output, sequence, and body <strong>before</strong> you start writing the loop.</p></li>
<li><p>Eliminate the for loop in each of the following examples by taking advantage of an existing function that works with vectors:</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="iteration.html#cb523-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="st">&quot;&quot;</span></span>
<span id="cb523-2"><a href="iteration.html#cb523-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> letters) {</span>
<span id="cb523-3"><a href="iteration.html#cb523-3" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(out, x)</span>
<span id="cb523-4"><a href="iteration.html#cb523-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb523-5"><a href="iteration.html#cb523-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb523-6"><a href="iteration.html#cb523-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">100</span>)</span>
<span id="cb523-7"><a href="iteration.html#cb523-7" aria-hidden="true" tabindex="-1"></a>sd <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb523-8"><a href="iteration.html#cb523-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) {</span>
<span id="cb523-9"><a href="iteration.html#cb523-9" aria-hidden="true" tabindex="-1"></a>  sd <span class="ot">&lt;-</span> sd <span class="sc">+</span> (x[i] <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb523-10"><a href="iteration.html#cb523-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb523-11"><a href="iteration.html#cb523-11" aria-hidden="true" tabindex="-1"></a>sd <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(sd <span class="sc">/</span> (<span class="fu">length</span>(x) <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb523-12"><a href="iteration.html#cb523-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb523-13"><a href="iteration.html#cb523-13" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">100</span>)</span>
<span id="cb523-14"><a href="iteration.html#cb523-14" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;numeric&quot;</span>, <span class="fu">length</span>(x))</span>
<span id="cb523-15"><a href="iteration.html#cb523-15" aria-hidden="true" tabindex="-1"></a>out[<span class="dv">1</span>] <span class="ot">&lt;-</span> x[<span class="dv">1</span>]</span>
<span id="cb523-16"><a href="iteration.html#cb523-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(x)) {</span>
<span id="cb523-17"><a href="iteration.html#cb523-17" aria-hidden="true" tabindex="-1"></a>  out[i] <span class="ot">&lt;-</span> out[i <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">+</span> x[i]</span>
<span id="cb523-18"><a href="iteration.html#cb523-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
<li><p>Combine your function writing and for loop skills:</p>
<ol style="list-style-type: lower-alpha">
<li>Write a for loop that <code>prints()</code> the lyrics to the children’s song “Alice the camel”.</li>
<li>Convert the nursery rhyme “ten in the bed” to a function. Generalise it to any number of people in any sleeping structure.</li>
<li>Convert the song “99 bottles of beer on the wall” to a function. Generalise to any number of any vessel containing any liquid on any surface.</li>
</ol></li>
<li><p>It’s common to see for loops that don’t preallocate the output and instead increase the length of a vector at each step:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="iteration.html#cb524-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;integer&quot;</span>, <span class="dv">0</span>)</span>
<span id="cb524-2"><a href="iteration.html#cb524-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) {</span>
<span id="cb524-3"><a href="iteration.html#cb524-3" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">c</span>(output, <span class="fu">lengths</span>(x[[i]]))</span>
<span id="cb524-4"><a href="iteration.html#cb524-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb524-5"><a href="iteration.html#cb524-5" aria-hidden="true" tabindex="-1"></a>output</span></code></pre></div>
<p>How does this affect performance?
Design and execute an experiment.</p></li>
</ol>
</div>
</div>
<div id="for-loop-variations" class="section level2" number="21.3">
<h2><span class="header-section-number">21.3</span> For loop variations</h2>
<p>Once you have the basic for loop under your belt, there are some variations that you should be aware of.
These variations are important regardless of how you do iteration, so don’t forget about them once you’ve mastered the FP techniques you’ll learn about in the next section.</p>
<p>There are four variations on the basic theme of the for loop:</p>
<ol style="list-style-type: decimal">
<li>Modifying an existing object, instead of creating a new object.</li>
<li>Looping over names or values, instead of indices.</li>
<li>Handling outputs of unknown length.</li>
<li>Handling sequences of unknown length.</li>
</ol>
<div id="modifying-an-existing-object" class="section level3" number="21.3.1">
<h3><span class="header-section-number">21.3.1</span> Modifying an existing object</h3>
<p>Sometimes you want to use a for loop to modify an existing object.
For example, remember our challenge from Chapter <a href="functions.html#functions">19</a> on functions.
We wanted to rescale every column in a data frame:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="iteration.html#cb525-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb525-2"><a href="iteration.html#cb525-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb525-3"><a href="iteration.html#cb525-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb525-4"><a href="iteration.html#cb525-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb525-5"><a href="iteration.html#cb525-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb525-6"><a href="iteration.html#cb525-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb525-7"><a href="iteration.html#cb525-7" aria-hidden="true" tabindex="-1"></a>rescale01 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb525-8"><a href="iteration.html#cb525-8" aria-hidden="true" tabindex="-1"></a>  rng <span class="ot">&lt;-</span> <span class="fu">range</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb525-9"><a href="iteration.html#cb525-9" aria-hidden="true" tabindex="-1"></a>  (x <span class="sc">-</span> rng[<span class="dv">1</span>]) <span class="sc">/</span> (rng[<span class="dv">2</span>] <span class="sc">-</span> rng[<span class="dv">1</span>])</span>
<span id="cb525-10"><a href="iteration.html#cb525-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb525-11"><a href="iteration.html#cb525-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb525-12"><a href="iteration.html#cb525-12" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>a <span class="ot">&lt;-</span> <span class="fu">rescale01</span>(df<span class="sc">$</span>a)</span>
<span id="cb525-13"><a href="iteration.html#cb525-13" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>b <span class="ot">&lt;-</span> <span class="fu">rescale01</span>(df<span class="sc">$</span>b)</span>
<span id="cb525-14"><a href="iteration.html#cb525-14" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>c <span class="ot">&lt;-</span> <span class="fu">rescale01</span>(df<span class="sc">$</span>c)</span>
<span id="cb525-15"><a href="iteration.html#cb525-15" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>d <span class="ot">&lt;-</span> <span class="fu">rescale01</span>(df<span class="sc">$</span>d)</span></code></pre></div>
<p>To solve this with a for loop we again think about the three components:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Output</strong>: we already have the output — it’s the same as the input!</p></li>
<li><p><strong>Sequence</strong>: we can think about a data frame as a list of columns, so we can iterate over each column with <code>seq_along(df)</code>.</p></li>
<li><p><strong>Body</strong>: apply <code>rescale01()</code>.</p></li>
</ol>
<p>This gives us:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="iteration.html#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb526-2"><a href="iteration.html#cb526-2" aria-hidden="true" tabindex="-1"></a>  df[[i]] <span class="ot">&lt;-</span> <span class="fu">rescale01</span>(df[[i]])</span>
<span id="cb526-3"><a href="iteration.html#cb526-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Typically you’ll be modifying a list or data frame with this sort of loop, so remember to use <code>[[</code>, not <code>[</code>.
You might have spotted that I used <code>[[</code> in all my for loops: I think it’s better to use <code>[[</code> even for atomic vectors because it makes it clear that I want to work with a single element.</p>
</div>
<div id="looping-patterns" class="section level3" number="21.3.2">
<h3><span class="header-section-number">21.3.2</span> Looping patterns</h3>
<p>There are three basic ways to loop over a vector.
So far I’ve shown you the most general: looping over the numeric indices with <code>for (i in seq_along(xs))</code>, and extracting the value with <code>x[[i]]</code>.
There are two other forms:</p>
<ol style="list-style-type: decimal">
<li><p>Loop over the elements: <code>for (x in xs)</code>.
This is most useful if you only care about side-effects, like plotting or saving a file, because it’s difficult to save the output efficiently.</p></li>
<li><p>Loop over the names: <code>for (nm in names(xs))</code>.
This gives you name, which you can use to access the value with <code>x[[nm]]</code>.
This is useful if you want to use the name in a plot title or a file name.
If you’re creating named output, make sure to name the results vector like so:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="iteration.html#cb527-1" aria-hidden="true" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="fu">length</span>(x))</span>
<span id="cb527-2"><a href="iteration.html#cb527-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(results) <span class="ot">&lt;-</span> <span class="fu">names</span>(x)</span></code></pre></div></li>
</ol>
<p>Iteration over the numeric indices is the most general form, because given the position you can extract both the name and the value:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="iteration.html#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) {</span>
<span id="cb528-2"><a href="iteration.html#cb528-2" aria-hidden="true" tabindex="-1"></a>  name <span class="ot">&lt;-</span> <span class="fu">names</span>(x)[[i]]</span>
<span id="cb528-3"><a href="iteration.html#cb528-3" aria-hidden="true" tabindex="-1"></a>  value <span class="ot">&lt;-</span> x[[i]]</span>
<span id="cb528-4"><a href="iteration.html#cb528-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="unknown-output-length" class="section level3" number="21.3.3">
<h3><span class="header-section-number">21.3.3</span> Unknown output length</h3>
<p>Sometimes you might not know how long the output will be.
For example, imagine you want to simulate some random vectors of random lengths.
You might be tempted to solve this problem by progressively growing the vector:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="iteration.html#cb529-1" aria-hidden="true" tabindex="-1"></a>means <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb529-2"><a href="iteration.html#cb529-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb529-3"><a href="iteration.html#cb529-3" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">double</span>()</span>
<span id="cb529-4"><a href="iteration.html#cb529-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(means)) {</span>
<span id="cb529-5"><a href="iteration.html#cb529-5" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb529-6"><a href="iteration.html#cb529-6" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">c</span>(output, <span class="fu">rnorm</span>(n, means[[i]]))</span>
<span id="cb529-7"><a href="iteration.html#cb529-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb529-8"><a href="iteration.html#cb529-8" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(output)</span>
<span id="cb529-9"><a href="iteration.html#cb529-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:138] 0.912 0.205 2.584 -0.789 0.588 ...</span></span></code></pre></div>
<p>But this is not very efficient because in each iteration, R has to copy all the data from the previous iterations.
In technical terms you get “quadratic” (<span class="math inline">\(O(n^2)\)</span>) behaviour which means that a loop with three times as many elements would take nine (<span class="math inline">\(3^2\)</span>) times as long to run.</p>
<p>A better solution to save the results in a list, and then combine into a single vector after the loop is done:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="iteration.html#cb530-1" aria-hidden="true" tabindex="-1"></a>out <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="fu">length</span>(means))</span>
<span id="cb530-2"><a href="iteration.html#cb530-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(means)) {</span>
<span id="cb530-3"><a href="iteration.html#cb530-3" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">100</span>, <span class="dv">1</span>)</span>
<span id="cb530-4"><a href="iteration.html#cb530-4" aria-hidden="true" tabindex="-1"></a>  out[[i]] <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(n, means[[i]])</span>
<span id="cb530-5"><a href="iteration.html#cb530-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb530-6"><a href="iteration.html#cb530-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(out)</span>
<span id="cb530-7"><a href="iteration.html#cb530-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb530-8"><a href="iteration.html#cb530-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:76] -0.3389 -0.0756 0.0402 0.1243 -0.9984 ...</span></span>
<span id="cb530-9"><a href="iteration.html#cb530-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:17] -0.11 1.149 0.614 0.77 1.392 ...</span></span>
<span id="cb530-10"><a href="iteration.html#cb530-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:41] 1.88 2.46 2.62 1.82 1.88 ...</span></span>
<span id="cb530-11"><a href="iteration.html#cb530-11" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">unlist</span>(out))</span>
<span id="cb530-12"><a href="iteration.html#cb530-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:134] -0.3389 -0.0756 0.0402 0.1243 -0.9984 ...</span></span></code></pre></div>
<p>Here I’ve used <code>unlist()</code> to flatten a list of vectors into a single vector.
A stricter option is to use <code>purrr::flatten_dbl()</code> — it will throw an error if the input isn’t a list of doubles.</p>
<p>This pattern occurs in other places too:</p>
<ol style="list-style-type: decimal">
<li><p>You might be generating a long string.
Instead of <code>paste()</code>ing together each iteration with the previous, save the output in a character vector and then combine that vector into a single string with <code>paste(output, collapse = "")</code>.</p></li>
<li><p>You might be generating a big data frame.
Instead of sequentially <code>rbind()</code>ing in each iteration, save the output in a list, then use <code>dplyr::bind_rows(output)</code> to combine the output into a single data frame.</p></li>
</ol>
<p>Watch out for this pattern.
Whenever you see it, switch to a more complex result object, and then combine in one step at the end.</p>
</div>
<div id="unknown-sequence-length" class="section level3" number="21.3.4">
<h3><span class="header-section-number">21.3.4</span> Unknown sequence length</h3>
<p>Sometimes you don’t even know how long the input sequence should run for.
This is common when doing simulations.
For example, you might want to loop until you get three heads in a row.
You can’t do that sort of iteration with the for loop.
Instead, you can use a while loop.
A while loop is simpler than for loop because it only has two components, a condition and a body:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="iteration.html#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (condition) {</span>
<span id="cb531-2"><a href="iteration.html#cb531-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># body</span></span>
<span id="cb531-3"><a href="iteration.html#cb531-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>A while loop is also more general than a for loop, because you can rewrite any for loop as a while loop, but you can’t rewrite every while loop as a for loop:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="iteration.html#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) {</span>
<span id="cb532-2"><a href="iteration.html#cb532-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># body</span></span>
<span id="cb532-3"><a href="iteration.html#cb532-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb532-4"><a href="iteration.html#cb532-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb532-5"><a href="iteration.html#cb532-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Equivalent to</span></span>
<span id="cb532-6"><a href="iteration.html#cb532-6" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb532-7"><a href="iteration.html#cb532-7" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="fu">length</span>(x)) {</span>
<span id="cb532-8"><a href="iteration.html#cb532-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># body</span></span>
<span id="cb532-9"><a href="iteration.html#cb532-9" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb532-10"><a href="iteration.html#cb532-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Here’s how we could use a while loop to find how many tries it takes to get three heads in a row:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="iteration.html#cb533-1" aria-hidden="true" tabindex="-1"></a>flip <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;T&quot;</span>, <span class="st">&quot;H&quot;</span>), <span class="dv">1</span>)</span>
<span id="cb533-2"><a href="iteration.html#cb533-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-3"><a href="iteration.html#cb533-3" aria-hidden="true" tabindex="-1"></a>flips <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb533-4"><a href="iteration.html#cb533-4" aria-hidden="true" tabindex="-1"></a>nheads <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb533-5"><a href="iteration.html#cb533-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb533-6"><a href="iteration.html#cb533-6" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (nheads <span class="sc">&lt;</span> <span class="dv">3</span>) {</span>
<span id="cb533-7"><a href="iteration.html#cb533-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">flip</span>() <span class="sc">==</span> <span class="st">&quot;H&quot;</span>) {</span>
<span id="cb533-8"><a href="iteration.html#cb533-8" aria-hidden="true" tabindex="-1"></a>    nheads <span class="ot">&lt;-</span> nheads <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb533-9"><a href="iteration.html#cb533-9" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb533-10"><a href="iteration.html#cb533-10" aria-hidden="true" tabindex="-1"></a>    nheads <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb533-11"><a href="iteration.html#cb533-11" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb533-12"><a href="iteration.html#cb533-12" aria-hidden="true" tabindex="-1"></a>  flips <span class="ot">&lt;-</span> flips <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb533-13"><a href="iteration.html#cb533-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb533-14"><a href="iteration.html#cb533-14" aria-hidden="true" tabindex="-1"></a>flips</span>
<span id="cb533-15"><a href="iteration.html#cb533-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 21</span></span></code></pre></div>
<p>I mention while loops only briefly, because I hardly ever use them.
They’re most often used for simulation, which is outside the scope of this book.
However, it is good to know they exist so that you’re prepared for problems where the number of iterations is not known in advance.</p>
</div>
<div id="exercises-19" class="section level3" number="21.3.5">
<h3><span class="header-section-number">21.3.5</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Imagine you have a directory full of CSV files that you want to read in.
You have their paths in a vector, <code>files &lt;- dir("data/", pattern = "\\.csv$", full.names = TRUE)</code>, and now want to read each one with <code>read_csv()</code>.
Write the for loop that will load them into a single data frame.</p></li>
<li><p>What happens if you use <code>for (nm in names(x))</code> and <code>x</code> has no names?
What if only some of the elements are named?
What if the names are not unique?</p></li>
<li><p>Write a function that prints the mean of each numeric column in a data frame, along with its name.
For example, <code>show_mean(mpg)</code> would print:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="iteration.html#cb534-1" aria-hidden="true" tabindex="-1"></a><span class="fu">show_mean</span>(mpg)</span>
<span id="cb534-2"><a href="iteration.html#cb534-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; displ:   3.47</span></span>
<span id="cb534-3"><a href="iteration.html#cb534-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; year: 2004</span></span>
<span id="cb534-4"><a href="iteration.html#cb534-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cyl:     5.89</span></span>
<span id="cb534-5"><a href="iteration.html#cb534-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; cty:    16.86</span></span></code></pre></div>
<p>(Extra challenge: what function did I use to make sure that the numbers lined up nicely, even though the variable names had different lengths?)</p></li>
<li><p>What does this code do?
How does it work?</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="iteration.html#cb535-1" aria-hidden="true" tabindex="-1"></a>trans <span class="ot">&lt;-</span> <span class="fu">list</span>( </span>
<span id="cb535-2"><a href="iteration.html#cb535-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">disp =</span> <span class="cf">function</span>(x) x <span class="sc">*</span> <span class="fl">0.0163871</span>,</span>
<span id="cb535-3"><a href="iteration.html#cb535-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">am =</span> <span class="cf">function</span>(x) {</span>
<span id="cb535-4"><a href="iteration.html#cb535-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">factor</span>(x, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;auto&quot;</span>, <span class="st">&quot;manual&quot;</span>))</span>
<span id="cb535-5"><a href="iteration.html#cb535-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb535-6"><a href="iteration.html#cb535-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb535-7"><a href="iteration.html#cb535-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (var <span class="cf">in</span> <span class="fu">names</span>(trans)) {</span>
<span id="cb535-8"><a href="iteration.html#cb535-8" aria-hidden="true" tabindex="-1"></a>  mtcars[[var]] <span class="ot">&lt;-</span> trans[[var]](mtcars[[var]])</span>
<span id="cb535-9"><a href="iteration.html#cb535-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div></li>
</ol>
</div>
</div>
<div id="for-loops-vs.-functionals" class="section level2" number="21.4">
<h2><span class="header-section-number">21.4</span> For loops vs. functionals</h2>
<p>For loops are not as important in R as they are in other languages because R is a functional programming language.
This means that it’s possible to wrap up for loops in a function, and call that function instead of using the for loop directly.</p>
<p>To see why this is important, consider (again) this simple data frame:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="iteration.html#cb536-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb536-2"><a href="iteration.html#cb536-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb536-3"><a href="iteration.html#cb536-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb536-4"><a href="iteration.html#cb536-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb536-5"><a href="iteration.html#cb536-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb536-6"><a href="iteration.html#cb536-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Imagine you want to compute the mean of every column.
You could do that with a for loop:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="iteration.html#cb537-1" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">length</span>(df))</span>
<span id="cb537-2"><a href="iteration.html#cb537-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb537-3"><a href="iteration.html#cb537-3" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df[[i]])</span>
<span id="cb537-4"><a href="iteration.html#cb537-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb537-5"><a href="iteration.html#cb537-5" aria-hidden="true" tabindex="-1"></a>output</span>
<span id="cb537-6"><a href="iteration.html#cb537-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.326  0.136  0.429 -0.250</span></span></code></pre></div>
<p>You realise that you’re going to want to compute the means of every column pretty frequently, so you extract it out into a function:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="iteration.html#cb538-1" aria-hidden="true" tabindex="-1"></a>col_mean <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb538-2"><a href="iteration.html#cb538-2" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">length</span>(df))</span>
<span id="cb538-3"><a href="iteration.html#cb538-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb538-4"><a href="iteration.html#cb538-4" aria-hidden="true" tabindex="-1"></a>    output[i] <span class="ot">&lt;-</span> <span class="fu">mean</span>(df[[i]])</span>
<span id="cb538-5"><a href="iteration.html#cb538-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb538-6"><a href="iteration.html#cb538-6" aria-hidden="true" tabindex="-1"></a>  output</span>
<span id="cb538-7"><a href="iteration.html#cb538-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>But then you think it’d also be helpful to be able to compute the median, and the standard deviation, so you copy and paste your <code>col_mean()</code> function and replace the <code>mean()</code> with <code>median()</code> and <code>sd()</code>:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb539-1"><a href="iteration.html#cb539-1" aria-hidden="true" tabindex="-1"></a>col_median <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb539-2"><a href="iteration.html#cb539-2" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">length</span>(df))</span>
<span id="cb539-3"><a href="iteration.html#cb539-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb539-4"><a href="iteration.html#cb539-4" aria-hidden="true" tabindex="-1"></a>    output[i] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])</span>
<span id="cb539-5"><a href="iteration.html#cb539-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb539-6"><a href="iteration.html#cb539-6" aria-hidden="true" tabindex="-1"></a>  output</span>
<span id="cb539-7"><a href="iteration.html#cb539-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb539-8"><a href="iteration.html#cb539-8" aria-hidden="true" tabindex="-1"></a>col_sd <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb539-9"><a href="iteration.html#cb539-9" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">length</span>(df))</span>
<span id="cb539-10"><a href="iteration.html#cb539-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb539-11"><a href="iteration.html#cb539-11" aria-hidden="true" tabindex="-1"></a>    output[i] <span class="ot">&lt;-</span> <span class="fu">sd</span>(df[[i]])</span>
<span id="cb539-12"><a href="iteration.html#cb539-12" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb539-13"><a href="iteration.html#cb539-13" aria-hidden="true" tabindex="-1"></a>  output</span>
<span id="cb539-14"><a href="iteration.html#cb539-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Uh oh!
You’ve copied-and-pasted this code twice, so it’s time to think about how to generalise it.
Notice that most of this code is for-loop boilerplate and it’s hard to see the one thing (<code>mean()</code>, <code>median()</code>, <code>sd()</code>) that is different between the functions.</p>
<p>What would you do if you saw a set of functions like this:</p>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="iteration.html#cb540-1" aria-hidden="true" tabindex="-1"></a>f1 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">abs</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">^</span> <span class="dv">1</span></span>
<span id="cb540-2"><a href="iteration.html#cb540-2" aria-hidden="true" tabindex="-1"></a>f2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">abs</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">^</span> <span class="dv">2</span></span>
<span id="cb540-3"><a href="iteration.html#cb540-3" aria-hidden="true" tabindex="-1"></a>f3 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">abs</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">^</span> <span class="dv">3</span></span></code></pre></div>
<p>Hopefully, you’d notice that there’s a lot of duplication, and extract it out into an additional argument:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb541-1"><a href="iteration.html#cb541-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="cf">function</span>(x, i) <span class="fu">abs</span>(x <span class="sc">-</span> <span class="fu">mean</span>(x)) <span class="sc">^</span> i</span></code></pre></div>
<p>You’ve reduced the chance of bugs (because you now have 1/3 of the original code), and made it easy to generalise to new situations.</p>
<p>We can do exactly the same thing with <code>col_mean()</code>, <code>col_median()</code> and <code>col_sd()</code> by adding an argument that supplies the function to apply to each column:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="iteration.html#cb542-1" aria-hidden="true" tabindex="-1"></a>col_summary <span class="ot">&lt;-</span> <span class="cf">function</span>(df, fun) {</span>
<span id="cb542-2"><a href="iteration.html#cb542-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;double&quot;</span>, <span class="fu">length</span>(df))</span>
<span id="cb542-3"><a href="iteration.html#cb542-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(df)) {</span>
<span id="cb542-4"><a href="iteration.html#cb542-4" aria-hidden="true" tabindex="-1"></a>    out[i] <span class="ot">&lt;-</span> <span class="fu">fun</span>(df[[i]])</span>
<span id="cb542-5"><a href="iteration.html#cb542-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb542-6"><a href="iteration.html#cb542-6" aria-hidden="true" tabindex="-1"></a>  out</span>
<span id="cb542-7"><a href="iteration.html#cb542-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb542-8"><a href="iteration.html#cb542-8" aria-hidden="true" tabindex="-1"></a><span class="fu">col_summary</span>(df, median)</span>
<span id="cb542-9"><a href="iteration.html#cb542-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.5185  0.0278  0.1730 -0.6116</span></span>
<span id="cb542-10"><a href="iteration.html#cb542-10" aria-hidden="true" tabindex="-1"></a><span class="fu">col_summary</span>(df, mean)</span>
<span id="cb542-11"><a href="iteration.html#cb542-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -0.326  0.136  0.429 -0.250</span></span></code></pre></div>
<p>The idea of passing a function to another function is an extremely powerful idea, and it’s one of the behaviours that makes R a functional programming language.
It might take you a while to wrap your head around the idea, but it’s worth the investment.
In the rest of the chapter, you’ll learn about and use the <strong>purrr</strong> package, which provides functions that eliminate the need for many common for loops.
The apply family of functions in base R (<code>apply()</code>, <code>lapply()</code>, <code>tapply()</code>, etc) solve a similar problem, but purrr is more consistent and thus is easier to learn.</p>
<p>The goal of using purrr functions instead of for loops is to allow you to break common list manipulation challenges into independent pieces:</p>
<ol style="list-style-type: decimal">
<li><p>How can you solve the problem for a single element of the list?
Once you’ve solved that problem, purrr takes care of generalising your solution to every element in the list.</p></li>
<li><p>If you’re solving a complex problem, how can you break it down into bite-sized pieces that allow you to advance one small step towards a solution?
With purrr, you get lots of small pieces that you can compose together with the pipe.</p></li>
</ol>
<p>This structure makes it easier to solve new problems.
It also makes it easier to understand your solutions to old problems when you re-read your old code.</p>
<div id="exercises-20" class="section level3" number="21.4.1">
<h3><span class="header-section-number">21.4.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Read the documentation for <code>apply()</code>.
In the 2d case, what two for loops does it generalise?</p></li>
<li><p>Adapt <code>col_summary()</code> so that it only applies to numeric columns You might want to start with an <code>is_numeric()</code> function that returns a logical vector that has a TRUE corresponding to each numeric column.</p></li>
</ol>
</div>
</div>
<div id="the-map-functions" class="section level2" number="21.5">
<h2><span class="header-section-number">21.5</span> The map functions</h2>
<p>The pattern of looping over a vector, doing something to each element and saving the results is so common that the purrr package provides a family of functions to do it for you.
There is one function for each type of output:</p>
<ul>
<li><code>map()</code> makes a list.</li>
<li><code>map_lgl()</code> makes a logical vector.</li>
<li><code>map_int()</code> makes an integer vector.</li>
<li><code>map_dbl()</code> makes a double vector.</li>
<li><code>map_chr()</code> makes a character vector.</li>
</ul>
<p>Each function takes a vector as input, applies a function to each piece, and then returns a new vector that’s the same length (and has the same names) as the input.
The type of the vector is determined by the suffix to the map function.</p>
<p>Once you master these functions, you’ll find it takes much less time to solve iteration problems.
But you should never feel bad about using a for loop instead of a map function.
The map functions are a step up a tower of abstraction, and it can take a long time to get your head around how they work.
The important thing is that you solve the problem that you’re working on, not write the most concise and elegant code (although that’s definitely something you want to strive towards!).</p>
<p>Some people will tell you to avoid for loops because they are slow.
They’re wrong!
(Well at least they’re rather out of date, as for loops haven’t been slow for many years.) The chief benefits of using functions like <code>map()</code> is not speed, but clarity: they make your code easier to write and to read.</p>
<p>We can use these functions to perform the same computations as the last for loop.
Those summary functions returned doubles, so we need to use <code>map_dbl()</code>:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="iteration.html#cb543-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(df, mean)</span>
<span id="cb543-2"><a href="iteration.html#cb543-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      a      b      c      d </span></span>
<span id="cb543-3"><a href="iteration.html#cb543-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -0.326  0.136  0.429 -0.250</span></span>
<span id="cb543-4"><a href="iteration.html#cb543-4" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(df, median)</span>
<span id="cb543-5"><a href="iteration.html#cb543-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       a       b       c       d </span></span>
<span id="cb543-6"><a href="iteration.html#cb543-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -0.5185  0.0278  0.1730 -0.6116</span></span>
<span id="cb543-7"><a href="iteration.html#cb543-7" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(df, sd)</span>
<span id="cb543-8"><a href="iteration.html#cb543-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     a     b     c     d </span></span>
<span id="cb543-9"><a href="iteration.html#cb543-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.921 0.485 0.982 1.156</span></span></code></pre></div>
<p>Compared to using a for loop, focus is on the operation being performed (i.e. <code>mean()</code>, <code>median()</code>, <code>sd()</code>), not the bookkeeping required to loop over every element and store the output.
This is even more apparent if we use the pipe:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="iteration.html#cb544-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(mean)</span>
<span id="cb544-2"><a href="iteration.html#cb544-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;      a      b      c      d </span></span>
<span id="cb544-3"><a href="iteration.html#cb544-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -0.326  0.136  0.429 -0.250</span></span>
<span id="cb544-4"><a href="iteration.html#cb544-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(median)</span>
<span id="cb544-5"><a href="iteration.html#cb544-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       a       b       c       d </span></span>
<span id="cb544-6"><a href="iteration.html#cb544-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -0.5185  0.0278  0.1730 -0.6116</span></span>
<span id="cb544-7"><a href="iteration.html#cb544-7" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(sd)</span>
<span id="cb544-8"><a href="iteration.html#cb544-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     a     b     c     d </span></span>
<span id="cb544-9"><a href="iteration.html#cb544-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.921 0.485 0.982 1.156</span></span></code></pre></div>
<p>There are a few differences between <code>map_*()</code> and <code>col_summary()</code>:</p>
<ul>
<li><p>All purrr functions are implemented in C.
This makes them a little faster at the expense of readability.</p></li>
<li><p>The second argument, <code>.f</code>, the function to apply, can be a formula, a character vector, or an integer vector.
You’ll learn about those handy shortcuts in the next section.</p></li>
<li><p><code>map_*()</code> uses … ([dot dot dot]) to pass along additional arguments to <code>.f</code> each time it’s called:</p>
<div class="sourceCode" id="cb545"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb545-1"><a href="iteration.html#cb545-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(df, mean, <span class="at">trim =</span> <span class="fl">0.5</span>)</span>
<span id="cb545-2"><a href="iteration.html#cb545-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;       a       b       c       d </span></span>
<span id="cb545-3"><a href="iteration.html#cb545-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; -0.5185  0.0278  0.1730 -0.6116</span></span></code></pre></div></li>
<li><p>The map functions also preserve names:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="iteration.html#cb546-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">y =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb546-2"><a href="iteration.html#cb546-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_int</span>(z, length)</span>
<span id="cb546-3"><a href="iteration.html#cb546-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; x y </span></span>
<span id="cb546-4"><a href="iteration.html#cb546-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2</span></span></code></pre></div></li>
</ul>
<div id="단축어" class="section level3" number="21.5.1">
<h3><span class="header-section-number">21.5.1</span> 단축어</h3>
<p>타이핑을 덜하기 위해 <code>.f</code> 와 함께 사용할 수 있는 단축어가 몇개 있다.
데이터셋 각 그룹에 선형 모형을 적합하고 싶다고 하자.
다음 예제에서는 <code>mtcars</code> 데이터셋을 (각 cylinder 값마다 하나씩) 세 조각으로 나누어 각 조각마다 선형 모형을 동일하게 적합한다.</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb547-1"><a href="iteration.html#cb547-1" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb547-2"><a href="iteration.html#cb547-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb547-3"><a href="iteration.html#cb547-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="cf">function</span>(df) <span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> df))</span></code></pre></div>
<p>R 에서 익명 함수를 생성하는 문법은 장황하다. 따라서 purrr 에는 편리한 단축어인 한쪽 공식(one-sided formula)이 있다.</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="iteration.html#cb548-1" aria-hidden="true" tabindex="-1"></a>models <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb548-2"><a href="iteration.html#cb548-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb548-3"><a href="iteration.html#cb548-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">lm</span>(mpg <span class="sc">~</span> wt, <span class="at">data =</span> .))</span></code></pre></div>
<p>여기에서 <code>.</code> 를 대명사로 사용하였는데, 현재 리스트 요소를 가리킨다.
for 루프에서 <code>i</code> 가 현재 지수를 가리키는 것과 같다.</p>
<p>많은 모형을 보다보면 <span class="math inline">\(R^2\)</span> 와 같은 요약 통계량을 추출하고 싶은 경우가 있다.
이를 위해서는 먼저 <code>summary()</code> 를 실행한 뒤 <code>r.squared</code> 라는 요소를 추출해야 한다.
익명 함수를 위한 단축어를 사용해서 할 수도 있다.</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb549-1"><a href="iteration.html#cb549-1" aria-hidden="true" tabindex="-1"></a>models <span class="sc">%&gt;%</span> </span>
<span id="cb549-2"><a href="iteration.html#cb549-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb549-3"><a href="iteration.html#cb549-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(<span class="sc">~</span>.x<span class="sc">$</span>r.squared)</span>
<span id="cb549-4"><a href="iteration.html#cb549-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     4     6     8 </span></span>
<span id="cb549-5"><a href="iteration.html#cb549-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.509 0.465 0.423</span></span></code></pre></div>
<p>그러나 명명된 구성요소를 추출하는 것은 자주하는 연산이므로
purrr 에는 더 짧은 단축어가 있는데, 바로 문자열을 사용할 수도 있다.</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="iteration.html#cb550-1" aria-hidden="true" tabindex="-1"></a>models <span class="sc">%&gt;%</span> </span>
<span id="cb550-2"><a href="iteration.html#cb550-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb550-3"><a href="iteration.html#cb550-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map_dbl</span>(<span class="st">&quot;r.squared&quot;</span>)</span>
<span id="cb550-4"><a href="iteration.html#cb550-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;     4     6     8 </span></span>
<span id="cb550-5"><a href="iteration.html#cb550-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 0.509 0.465 0.423</span></span></code></pre></div>
<p>정수형을 사용하여 위치로 요소를 선택할 수도 있다.</p>
<div class="sourceCode" id="cb551"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb551-1"><a href="iteration.html#cb551-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="fu">list</span>(<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="fu">list</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>))</span>
<span id="cb551-2"><a href="iteration.html#cb551-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(<span class="dv">2</span>)</span>
<span id="cb551-3"><a href="iteration.html#cb551-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 2 5 8</span></span></code></pre></div>
</div>
<div id="base-r" class="section level3" number="21.5.2">
<h3><span class="header-section-number">21.5.2</span> Base R</h3>
<p>If you’re familiar with the apply family of functions in base R, you might have noticed some similarities with the purrr functions:</p>
<ul>
<li><p><code>lapply()</code> is basically identical to <code>map()</code>, except that <code>map()</code> is consistent with all the other functions in purrr, and you can use the shortcuts for <code>.f</code>.</p></li>
<li><p>Base <code>sapply()</code> is a wrapper around <code>lapply()</code> that automatically simplifies the output.
This is useful for interactive work but is problematic in a function because you never know what sort of output you’ll get:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="iteration.html#cb552-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb552-2"><a href="iteration.html#cb552-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fl">0.27</span>, <span class="fl">0.37</span>, <span class="fl">0.57</span>, <span class="fl">0.91</span>, <span class="fl">0.20</span>),</span>
<span id="cb552-3"><a href="iteration.html#cb552-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fl">0.90</span>, <span class="fl">0.94</span>, <span class="fl">0.66</span>, <span class="fl">0.63</span>, <span class="fl">0.06</span>), </span>
<span id="cb552-4"><a href="iteration.html#cb552-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fl">0.21</span>, <span class="fl">0.18</span>, <span class="fl">0.69</span>, <span class="fl">0.38</span>, <span class="fl">0.77</span>)</span>
<span id="cb552-5"><a href="iteration.html#cb552-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb552-6"><a href="iteration.html#cb552-6" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb552-7"><a href="iteration.html#cb552-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fl">0.50</span>, <span class="fl">0.72</span>, <span class="fl">0.99</span>, <span class="fl">0.38</span>, <span class="fl">0.78</span>), </span>
<span id="cb552-8"><a href="iteration.html#cb552-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fl">0.93</span>, <span class="fl">0.21</span>, <span class="fl">0.65</span>, <span class="fl">0.13</span>, <span class="fl">0.27</span>), </span>
<span id="cb552-9"><a href="iteration.html#cb552-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="fl">0.39</span>, <span class="fl">0.01</span>, <span class="fl">0.38</span>, <span class="fl">0.87</span>, <span class="fl">0.34</span>)</span>
<span id="cb552-10"><a href="iteration.html#cb552-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb552-11"><a href="iteration.html#cb552-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb552-12"><a href="iteration.html#cb552-12" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">cutoff =</span> <span class="fl">0.8</span>) x[x <span class="sc">&gt;</span> cutoff]</span>
<span id="cb552-13"><a href="iteration.html#cb552-13" aria-hidden="true" tabindex="-1"></a>x1 <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(threshold) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span>
<span id="cb552-14"><a href="iteration.html#cb552-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb552-15"><a href="iteration.html#cb552-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num 0.91</span></span>
<span id="cb552-16"><a href="iteration.html#cb552-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:2] 0.9 0.94</span></span>
<span id="cb552-17"><a href="iteration.html#cb552-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num(0)</span></span>
<span id="cb552-18"><a href="iteration.html#cb552-18" aria-hidden="true" tabindex="-1"></a>x2 <span class="sc">%&gt;%</span> <span class="fu">sapply</span>(threshold) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span>
<span id="cb552-19"><a href="iteration.html#cb552-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  num [1:3] 0.99 0.93 0.87</span></span></code></pre></div></li>
<li><p><code>vapply()</code> is a safe alternative to <code>sapply()</code> because you supply an additional argument that defines the type.
The only problem with <code>vapply()</code> is that it’s a lot of typing: <code>vapply(df, is.numeric, logical(1))</code> is equivalent to <code>map_lgl(df, is.numeric)</code>.
One advantage of <code>vapply()</code> over purrr’s map functions is that it can also produce matrices — the map functions only ever produce vectors.</p></li>
</ul>
<p>I focus on purrr functions here because they have more consistent names and arguments, helpful shortcuts, and in the future will provide easy parallelism and progress bars.</p>
</div>
<div id="exercises-21" class="section level3" number="21.5.3">
<h3><span class="header-section-number">21.5.3</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Write code that uses one of the map functions to:</p>
<ol style="list-style-type: lower-alpha">
<li>Compute the mean of every column in <code>mtcars</code>.</li>
<li>Determine the type of each column in <code>nycflights13::flights</code>.</li>
<li>Compute the number of unique values in each column of <code>palmerpenguins::penguins</code>.</li>
<li>Generate 10 random normals from distributions with means of -10, 0, 10, and 100.</li>
</ol></li>
<li><p>How can you create a single vector that for each column in a data frame indicates whether or not it’s a factor?</p></li>
<li><p>What happens when you use the map functions on vectors that aren’t lists?
What does <code>map(1:5, runif)</code> do?
Why?</p></li>
<li><p>What does <code>map(-2:2, rnorm, n = 5)</code> do?
Why?
What does <code>map_dbl(-2:2, rnorm, n = 5)</code> do?
Why?</p></li>
<li><p>Rewrite <code>map(x, function(df) lm(mpg ~ wt, data = df))</code> to eliminate the anonymous function.</p></li>
</ol>
</div>
</div>
<div id="dealing-with-failure" class="section level2" number="21.6">
<h2><span class="header-section-number">21.6</span> Dealing with failure</h2>
<p>When you use the map functions to repeat many operations, the chances are much higher that one of those operations will fail.
When this happens, you’ll get an error message, and no output.
This is annoying: why does one failure prevent you from accessing all the other successes?
How do you ensure that one bad apple doesn’t ruin the whole barrel?</p>
<p>In this section you’ll learn how to deal with this situation with a new function: <code>safely()</code>.
<code>safely()</code> is an adverb: it takes a function (a verb) and returns a modified version.
In this case, the modified function will never throw an error.
Instead, it always returns a list with two elements:</p>
<ol style="list-style-type: decimal">
<li><p><code>result</code> is the original result.
If there was an error, this will be <code>NULL</code>.</p></li>
<li><p><code>error</code> is an error object.
If the operation was successful, this will be <code>NULL</code>.</p></li>
</ol>
<p>(You might be familiar with the <code>try()</code> function in base R.
It’s similar, but because it sometimes returns the original result and it sometimes returns an error object it’s more difficult to work with.)</p>
<p>Let’s illustrate this with a simple example: <code>log()</code>:</p>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb553-1"><a href="iteration.html#cb553-1" aria-hidden="true" tabindex="-1"></a>safe_log <span class="ot">&lt;-</span> <span class="fu">safely</span>(log)</span>
<span id="cb553-2"><a href="iteration.html#cb553-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">safe_log</span>(<span class="dv">10</span>))</span>
<span id="cb553-3"><a href="iteration.html#cb553-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb553-4"><a href="iteration.html#cb553-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ result: num 2.3</span></span>
<span id="cb553-5"><a href="iteration.html#cb553-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ error : NULL</span></span>
<span id="cb553-6"><a href="iteration.html#cb553-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">safe_log</span>(<span class="st">&quot;a&quot;</span>))</span>
<span id="cb553-7"><a href="iteration.html#cb553-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb553-8"><a href="iteration.html#cb553-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ result: NULL</span></span>
<span id="cb553-9"><a href="iteration.html#cb553-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ error :List of 2</span></span>
<span id="cb553-10"><a href="iteration.html#cb553-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ message: chr &quot;수학함수에 숫자가 아닌 인자가 전달되었습니다&quot;</span></span>
<span id="cb553-11"><a href="iteration.html#cb553-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ call   : language .Primitive(&quot;log&quot;)(x, base)</span></span>
<span id="cb553-12"><a href="iteration.html#cb553-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></span></code></pre></div>
<p>When the function succeeds, the <code>result</code> element contains the result and the <code>error</code> element is <code>NULL</code>.
When the function fails, the <code>result</code> element is <code>NULL</code> and the <code>error</code> element contains an error object.</p>
<p><code>safely()</code> is designed to work with map:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="iteration.html#cb554-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb554-2"><a href="iteration.html#cb554-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="fu">safely</span>(log))</span>
<span id="cb554-3"><a href="iteration.html#cb554-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span>
<span id="cb554-4"><a href="iteration.html#cb554-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb554-5"><a href="iteration.html#cb554-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 2</span></span>
<span id="cb554-6"><a href="iteration.html#cb554-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ result: num 0</span></span>
<span id="cb554-7"><a href="iteration.html#cb554-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ error : NULL</span></span>
<span id="cb554-8"><a href="iteration.html#cb554-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 2</span></span>
<span id="cb554-9"><a href="iteration.html#cb554-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ result: num 2.3</span></span>
<span id="cb554-10"><a href="iteration.html#cb554-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ error : NULL</span></span>
<span id="cb554-11"><a href="iteration.html#cb554-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 2</span></span>
<span id="cb554-12"><a href="iteration.html#cb554-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ result: NULL</span></span>
<span id="cb554-13"><a href="iteration.html#cb554-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ error :List of 2</span></span>
<span id="cb554-14"><a href="iteration.html#cb554-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .. ..$ message: chr &quot;수학함수에 숫자가 아닌 인자가 전달되었습니다&quot;</span></span>
<span id="cb554-15"><a href="iteration.html#cb554-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .. ..$ call   : language .Primitive(&quot;log&quot;)(x, base)</span></span>
<span id="cb554-16"><a href="iteration.html#cb554-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .. ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></span></code></pre></div>
<p>This would be easier to work with if we had two lists: one of all the errors and one of all the output.
That’s easy to get with <code>purrr::transpose()</code>:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb555-1"><a href="iteration.html#cb555-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> y <span class="sc">%&gt;%</span> <span class="fu">transpose</span>()</span>
<span id="cb555-2"><a href="iteration.html#cb555-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(y)</span>
<span id="cb555-3"><a href="iteration.html#cb555-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb555-4"><a href="iteration.html#cb555-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ result:List of 3</span></span>
<span id="cb555-5"><a href="iteration.html#cb555-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : num 0</span></span>
<span id="cb555-6"><a href="iteration.html#cb555-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : num 2.3</span></span>
<span id="cb555-7"><a href="iteration.html#cb555-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : NULL</span></span>
<span id="cb555-8"><a href="iteration.html#cb555-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ error :List of 3</span></span>
<span id="cb555-9"><a href="iteration.html#cb555-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : NULL</span></span>
<span id="cb555-10"><a href="iteration.html#cb555-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ : NULL</span></span>
<span id="cb555-11"><a href="iteration.html#cb555-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ :List of 2</span></span>
<span id="cb555-12"><a href="iteration.html#cb555-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .. ..$ message: chr &quot;수학함수에 숫자가 아닌 인자가 전달되었습니다&quot;</span></span>
<span id="cb555-13"><a href="iteration.html#cb555-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .. ..$ call   : language .Primitive(&quot;log&quot;)(x, base)</span></span>
<span id="cb555-14"><a href="iteration.html#cb555-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   .. ..- attr(*, &quot;class&quot;)= chr [1:3] &quot;simpleError&quot; &quot;error&quot; &quot;condition&quot;</span></span></code></pre></div>
<p>It’s up to you how to deal with the errors, but typically you’ll either look at the values of <code>x</code> where <code>y</code> is an error, or work with the values of <code>y</code> that are ok:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="iteration.html#cb556-1" aria-hidden="true" tabindex="-1"></a>is_ok <span class="ot">&lt;-</span> y<span class="sc">$</span>error <span class="sc">%&gt;%</span> <span class="fu">map_lgl</span>(is_null)</span>
<span id="cb556-2"><a href="iteration.html#cb556-2" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">!</span>is_ok]</span>
<span id="cb556-3"><a href="iteration.html#cb556-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb556-4"><a href="iteration.html#cb556-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot;</span></span>
<span id="cb556-5"><a href="iteration.html#cb556-5" aria-hidden="true" tabindex="-1"></a>y<span class="sc">$</span>result[is_ok] <span class="sc">%&gt;%</span> <span class="fu">flatten_dbl</span>()</span>
<span id="cb556-6"><a href="iteration.html#cb556-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0 2.3</span></span></code></pre></div>
<p>Purrr provides two other useful adverbs:</p>
<ul>
<li><p>Like <code>safely()</code>, <code>possibly()</code> always succeeds.
It’s simpler than <code>safely()</code>, because you give it a default value to return when there is an error.</p>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb557-1"><a href="iteration.html#cb557-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">10</span>, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb557-2"><a href="iteration.html#cb557-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(<span class="fu">possibly</span>(log, <span class="cn">NA_real_</span>))</span>
<span id="cb557-3"><a href="iteration.html#cb557-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 0.0 2.3  NA</span></span></code></pre></div></li>
<li><p><code>quietly()</code> performs a similar role to <code>safely()</code>, but instead of capturing errors, it captures printed output, messages, and warnings:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="iteration.html#cb558-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb558-2"><a href="iteration.html#cb558-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">map</span>(<span class="fu">quietly</span>(log)) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span>
<span id="cb558-3"><a href="iteration.html#cb558-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 2</span></span>
<span id="cb558-4"><a href="iteration.html#cb558-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 4</span></span>
<span id="cb558-5"><a href="iteration.html#cb558-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ result  : num 0</span></span>
<span id="cb558-6"><a href="iteration.html#cb558-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ output  : chr &quot;&quot;</span></span>
<span id="cb558-7"><a href="iteration.html#cb558-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ warnings: chr(0) </span></span>
<span id="cb558-8"><a href="iteration.html#cb558-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ messages: chr(0) </span></span>
<span id="cb558-9"><a href="iteration.html#cb558-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ :List of 4</span></span>
<span id="cb558-10"><a href="iteration.html#cb558-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ result  : num NaN</span></span>
<span id="cb558-11"><a href="iteration.html#cb558-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ output  : chr &quot;&quot;</span></span>
<span id="cb558-12"><a href="iteration.html#cb558-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ warnings: chr &quot;NaN이 생성되었습니다&quot;</span></span>
<span id="cb558-13"><a href="iteration.html#cb558-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   ..$ messages: chr(0)</span></span></code></pre></div></li>
</ul>
</div>
<div id="mapping-over-multiple-arguments" class="section level2" number="21.7">
<h2><span class="header-section-number">21.7</span> Mapping over multiple arguments</h2>
<p>So far we’ve mapped along a single input.
But often you have multiple related inputs that you need iterate along in parallel.
That’s the job of the <code>map2()</code> and <code>pmap()</code> functions.
For example, imagine you want to simulate some random normals with different means.
You know how to do that with <code>map()</code>:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb559-1"><a href="iteration.html#cb559-1" aria-hidden="true" tabindex="-1"></a>mu <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>)</span>
<span id="cb559-2"><a href="iteration.html#cb559-2" aria-hidden="true" tabindex="-1"></a>mu <span class="sc">%&gt;%</span> </span>
<span id="cb559-3"><a href="iteration.html#cb559-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(rnorm, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb559-4"><a href="iteration.html#cb559-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span>
<span id="cb559-5"><a href="iteration.html#cb559-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb559-6"><a href="iteration.html#cb559-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 5.63 7.1 4.39 3.37 4.99</span></span>
<span id="cb559-7"><a href="iteration.html#cb559-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 9.34 9.33 9.52 11.32 10.64</span></span>
<span id="cb559-8"><a href="iteration.html#cb559-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] -2.49 -4.75 -2.11 -2.78 -2.42</span></span></code></pre></div>
<p>What if you also want to vary the standard deviation?
One way to do that would be to iterate over the indices and index into vectors of means and sds:</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="iteration.html#cb560-1" aria-hidden="true" tabindex="-1"></a>sigma <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>)</span>
<span id="cb560-2"><a href="iteration.html#cb560-2" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(mu) <span class="sc">%&gt;%</span> </span>
<span id="cb560-3"><a href="iteration.html#cb560-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">rnorm</span>(<span class="dv">5</span>, mu[[.x]], sigma[[.x]])) <span class="sc">%&gt;%</span> </span>
<span id="cb560-4"><a href="iteration.html#cb560-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span>
<span id="cb560-5"><a href="iteration.html#cb560-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb560-6"><a href="iteration.html#cb560-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 4.82 5.74 4 2.06 5.72</span></span>
<span id="cb560-7"><a href="iteration.html#cb560-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 6.51 0.529 10.381 14.377 12.269</span></span>
<span id="cb560-8"><a href="iteration.html#cb560-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] -11.51 2.66 8.52 -10.56 -7.89</span></span></code></pre></div>
<p>But that obfuscates the intent of the code.
Instead we could use <code>map2()</code> which iterates over two vectors in parallel:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb561-1"><a href="iteration.html#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map2</span>(mu, sigma, rnorm, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span>
<span id="cb561-2"><a href="iteration.html#cb561-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb561-3"><a href="iteration.html#cb561-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 3.83 4.52 5.12 3.23 3.59</span></span>
<span id="cb561-4"><a href="iteration.html#cb561-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 13.55 3.8 8.16 12.31 8.39</span></span>
<span id="cb561-5"><a href="iteration.html#cb561-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] -15.872 -13.3 12.141 0.469 14.794</span></span></code></pre></div>
<p><code>map2()</code> generates this series of function calls:</p>
<p><img src="diagrams/lists-map2.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Note that the arguments that vary for each call come <em>before</em> the function; arguments that are the same for every call come <em>after</em>.</p>
<p>Like <code>map()</code>, <code>map2()</code> is just a wrapper around a for loop:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="iteration.html#cb562-1" aria-hidden="true" tabindex="-1"></a>map2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y, f, ...) {</span>
<span id="cb562-2"><a href="iteration.html#cb562-2" aria-hidden="true" tabindex="-1"></a>  out <span class="ot">&lt;-</span> <span class="fu">vector</span>(<span class="st">&quot;list&quot;</span>, <span class="fu">length</span>(x))</span>
<span id="cb562-3"><a href="iteration.html#cb562-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(x)) {</span>
<span id="cb562-4"><a href="iteration.html#cb562-4" aria-hidden="true" tabindex="-1"></a>    out[[i]] <span class="ot">&lt;-</span> <span class="fu">f</span>(x[[i]], y[[i]], ...)</span>
<span id="cb562-5"><a href="iteration.html#cb562-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb562-6"><a href="iteration.html#cb562-6" aria-hidden="true" tabindex="-1"></a>  out</span>
<span id="cb562-7"><a href="iteration.html#cb562-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>You could also imagine <code>map3()</code>, <code>map4()</code>, <code>map5()</code>, <code>map6()</code> etc, but that would get tedious quickly.
Instead, purrr provides <code>pmap()</code> which takes a list of arguments.
You might use that if you wanted to vary the mean, standard deviation, and number of samples:</p>
<div class="sourceCode" id="cb563"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb563-1"><a href="iteration.html#cb563-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb563-2"><a href="iteration.html#cb563-2" aria-hidden="true" tabindex="-1"></a>args1 <span class="ot">&lt;-</span> <span class="fu">list</span>(n, mu, sigma)</span>
<span id="cb563-3"><a href="iteration.html#cb563-3" aria-hidden="true" tabindex="-1"></a>args1 <span class="sc">%&gt;%</span></span>
<span id="cb563-4"><a href="iteration.html#cb563-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap</span>(rnorm) <span class="sc">%&gt;%</span> </span>
<span id="cb563-5"><a href="iteration.html#cb563-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span>
<span id="cb563-6"><a href="iteration.html#cb563-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb563-7"><a href="iteration.html#cb563-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num 5.39</span></span>
<span id="cb563-8"><a href="iteration.html#cb563-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:3] 5.41 2.08 9.58</span></span>
<span id="cb563-9"><a href="iteration.html#cb563-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] -23.85 -2.96 -6.56 8.46 -5.21</span></span></code></pre></div>
<p>That looks like:</p>
<p><img src="diagrams/lists-pmap-unnamed.png" width="70%" style="display: block; margin: auto;" /></p>
<p>If you don’t name the list’s elements, <code>pmap()</code> will use positional matching when calling the function.
That’s a little fragile, and makes the code harder to read, so it’s better to name the arguments:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="iteration.html#cb564-1" aria-hidden="true" tabindex="-1"></a>args2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">mean =</span> mu, <span class="at">sd =</span> sigma, <span class="at">n =</span> n)</span>
<span id="cb564-2"><a href="iteration.html#cb564-2" aria-hidden="true" tabindex="-1"></a>args2 <span class="sc">%&gt;%</span> </span>
<span id="cb564-3"><a href="iteration.html#cb564-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap</span>(rnorm) <span class="sc">%&gt;%</span> </span>
<span id="cb564-4"><a href="iteration.html#cb564-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span></code></pre></div>
<p>That generates longer, but safer, calls:</p>
<p><img src="diagrams/lists-pmap-named.png" width="70%" style="display: block; margin: auto;" /></p>
<p>Since the arguments are all the same length, it makes sense to store them in a data frame:</p>
<div class="sourceCode" id="cb565"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb565-1"><a href="iteration.html#cb565-1" aria-hidden="true" tabindex="-1"></a>params <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb565-2"><a href="iteration.html#cb565-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>mean, <span class="sc">~</span>sd, <span class="sc">~</span>n,</span>
<span id="cb565-3"><a href="iteration.html#cb565-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span>,     <span class="dv">1</span>,  <span class="dv">1</span>,</span>
<span id="cb565-4"><a href="iteration.html#cb565-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">10</span>,     <span class="dv">5</span>,  <span class="dv">3</span>,</span>
<span id="cb565-5"><a href="iteration.html#cb565-5" aria-hidden="true" tabindex="-1"></a>   <span class="sc">-</span><span class="dv">3</span>,    <span class="dv">10</span>,  <span class="dv">5</span></span>
<span id="cb565-6"><a href="iteration.html#cb565-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb565-7"><a href="iteration.html#cb565-7" aria-hidden="true" tabindex="-1"></a>params <span class="sc">%&gt;%</span> </span>
<span id="cb565-8"><a href="iteration.html#cb565-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pmap</span>(rnorm)</span>
<span id="cb565-9"><a href="iteration.html#cb565-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb565-10"><a href="iteration.html#cb565-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 6.02</span></span>
<span id="cb565-11"><a href="iteration.html#cb565-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb565-12"><a href="iteration.html#cb565-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb565-13"><a href="iteration.html#cb565-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  8.68 18.29  6.13</span></span>
<span id="cb565-14"><a href="iteration.html#cb565-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb565-15"><a href="iteration.html#cb565-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb565-16"><a href="iteration.html#cb565-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] -12.24  -5.76  -8.93  -4.22   8.80</span></span></code></pre></div>
<p>As soon as your code gets complicated, I think a data frame is a good approach because it ensures that each column has a name and is the same length as all the other columns.</p>
<div id="invoking-different-functions" class="section level3" number="21.7.1">
<h3><span class="header-section-number">21.7.1</span> Invoking different functions</h3>
<p>There’s one more step up in complexity - as well as varying the arguments to the function you might also vary the function itself:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="iteration.html#cb566-1" aria-hidden="true" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;runif&quot;</span>, <span class="st">&quot;rnorm&quot;</span>, <span class="st">&quot;rpois&quot;</span>)</span>
<span id="cb566-2"><a href="iteration.html#cb566-2" aria-hidden="true" tabindex="-1"></a>param <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb566-3"><a href="iteration.html#cb566-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">min =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">max =</span> <span class="dv">1</span>), </span>
<span id="cb566-4"><a href="iteration.html#cb566-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">sd =</span> <span class="dv">5</span>), </span>
<span id="cb566-5"><a href="iteration.html#cb566-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">lambda =</span> <span class="dv">10</span>)</span>
<span id="cb566-6"><a href="iteration.html#cb566-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>To handle this case, you can use <code>invoke_map()</code>:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb567-1"><a href="iteration.html#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="fu">invoke_map</span>(f, param, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span>
<span id="cb567-2"><a href="iteration.html#cb567-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; List of 3</span></span>
<span id="cb567-3"><a href="iteration.html#cb567-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 0.479 0.439 -0.471 0.348 -0.581</span></span>
<span id="cb567-4"><a href="iteration.html#cb567-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : num [1:5] 2.48 3.9 7.54 -9.12 3.94</span></span>
<span id="cb567-5"><a href="iteration.html#cb567-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ : int [1:5] 6 11 5 8 9</span></span></code></pre></div>
<p><img src="diagrams/lists-invoke.png" style="display: block; margin: auto;" /></p>
<p>The first argument is a list of functions or character vector of function names.
The second argument is a list of lists giving the arguments that vary for each function.
The subsequent arguments are passed on to every function.</p>
<p>And again, you can use <code>tribble()</code> to make creating these matching pairs a little easier:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="iteration.html#cb568-1" aria-hidden="true" tabindex="-1"></a>sim <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb568-2"><a href="iteration.html#cb568-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>f,      <span class="sc">~</span>params,</span>
<span id="cb568-3"><a href="iteration.html#cb568-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;runif&quot;</span>, <span class="fu">list</span>(<span class="at">min =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">max =</span> <span class="dv">1</span>),</span>
<span id="cb568-4"><a href="iteration.html#cb568-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;rnorm&quot;</span>, <span class="fu">list</span>(<span class="at">sd =</span> <span class="dv">5</span>),</span>
<span id="cb568-5"><a href="iteration.html#cb568-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;rpois&quot;</span>, <span class="fu">list</span>(<span class="at">lambda =</span> <span class="dv">10</span>)</span>
<span id="cb568-6"><a href="iteration.html#cb568-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb568-7"><a href="iteration.html#cb568-7" aria-hidden="true" tabindex="-1"></a>sim <span class="sc">%&gt;%</span> </span>
<span id="cb568-8"><a href="iteration.html#cb568-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sim =</span> <span class="fu">invoke_map</span>(f, params, <span class="at">n =</span> <span class="dv">10</span>))</span></code></pre></div>
</div>
</div>
<div id="walk" class="section level2" number="21.8">
<h2><span class="header-section-number">21.8</span> Walk</h2>
<p>Walk is an alternative to map that you use when you want to call a function for its side effects, rather than for its return value.
You typically do this because you want to render output to the screen or save files to disk - the important thing is the action, not the return value.
Here’s a very simple example:</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb569-1"><a href="iteration.html#cb569-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="st">&quot;a&quot;</span>, <span class="dv">3</span>)</span>
<span id="cb569-2"><a href="iteration.html#cb569-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb569-3"><a href="iteration.html#cb569-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb569-4"><a href="iteration.html#cb569-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">walk</span>(print)</span>
<span id="cb569-5"><a href="iteration.html#cb569-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb569-6"><a href="iteration.html#cb569-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] &quot;a&quot;</span></span>
<span id="cb569-7"><a href="iteration.html#cb569-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p><code>walk()</code> is generally not that useful compared to <code>walk2()</code> or <code>pwalk()</code>.
For example, if you had a list of plots and a vector of file names, you could use <code>pwalk()</code> to save each file to the corresponding location on disk:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="iteration.html#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb570-2"><a href="iteration.html#cb570-2" aria-hidden="true" tabindex="-1"></a>plots <span class="ot">&lt;-</span> mtcars <span class="sc">%&gt;%</span> </span>
<span id="cb570-3"><a href="iteration.html#cb570-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split</span>(.<span class="sc">$</span>cyl) <span class="sc">%&gt;%</span> </span>
<span id="cb570-4"><a href="iteration.html#cb570-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(<span class="sc">~</span><span class="fu">ggplot</span>(.x, <span class="fu">aes</span>(mpg, wt)) <span class="sc">+</span> <span class="fu">geom_point</span>())</span>
<span id="cb570-5"><a href="iteration.html#cb570-5" aria-hidden="true" tabindex="-1"></a>paths <span class="ot">&lt;-</span> stringr<span class="sc">::</span><span class="fu">str_c</span>(<span class="fu">names</span>(plots), <span class="st">&quot;.pdf&quot;</span>)</span>
<span id="cb570-6"><a href="iteration.html#cb570-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb570-7"><a href="iteration.html#cb570-7" aria-hidden="true" tabindex="-1"></a><span class="fu">pwalk</span>(<span class="fu">list</span>(paths, plots), ggsave, <span class="at">path =</span> <span class="fu">tempdir</span>())</span></code></pre></div>
<p><code>walk()</code>, <code>walk2()</code> and <code>pwalk()</code> all invisibly return <code>.</code>, the first argument.
This makes them suitable for use in the middle of pipelines.</p>
</div>
<div id="other-patterns-of-for-loops" class="section level2" number="21.9">
<h2><span class="header-section-number">21.9</span> Other patterns of for loops</h2>
<p>Purrr provides a number of other functions that abstract over other types of for loops.
You’ll use them less frequently than the map functions, but they’re useful to know about.
The goal here is to briefly illustrate each function, so hopefully it will come to mind if you see a similar problem in the future.
Then you can go look up the documentation for more details.</p>
<div id="predicate-functions" class="section level3" number="21.9.1">
<h3><span class="header-section-number">21.9.1</span> Predicate functions</h3>
<p>A number of functions work with <strong>predicate</strong> functions that return either a single <code>TRUE</code> or <code>FALSE</code>.</p>
<p><code>keep()</code> and <code>discard()</code> keep elements of the input where the predicate is <code>TRUE</code> or <code>FALSE</code> respectively:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb571-1"><a href="iteration.html#cb571-1" aria-hidden="true" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span> </span>
<span id="cb571-2"><a href="iteration.html#cb571-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">keep</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb571-3"><a href="iteration.html#cb571-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span>
<span id="cb571-4"><a href="iteration.html#cb571-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tibble [21,483 x 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb571-5"><a href="iteration.html#cb571-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ marital: Factor w/ 6 levels &quot;No answer&quot;,&quot;Never married&quot;,..: 2 4 5 2 4 6 2 4 6 6 ...</span></span>
<span id="cb571-6"><a href="iteration.html#cb571-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ race   : Factor w/ 4 levels &quot;Other&quot;,&quot;Black&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...</span></span>
<span id="cb571-7"><a href="iteration.html#cb571-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ rincome: Factor w/ 16 levels &quot;No answer&quot;,&quot;Don&#39;t know&quot;,..: 8 8 16 16 16 5 4 9 4 4 ...</span></span>
<span id="cb571-8"><a href="iteration.html#cb571-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ partyid: Factor w/ 10 levels &quot;No answer&quot;,&quot;Don&#39;t know&quot;,..: 6 5 7 6 9 10 5 8 9 4 ...</span></span>
<span id="cb571-9"><a href="iteration.html#cb571-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ relig  : Factor w/ 16 levels &quot;No answer&quot;,&quot;Don&#39;t know&quot;,..: 15 15 15 6 12 15 5 15 15 15 ...</span></span>
<span id="cb571-10"><a href="iteration.html#cb571-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ denom  : Factor w/ 30 levels &quot;No answer&quot;,&quot;Don&#39;t know&quot;,..: 25 23 3 30 30 25 30 15 4 25 ...</span></span>
<span id="cb571-11"><a href="iteration.html#cb571-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb571-12"><a href="iteration.html#cb571-12" aria-hidden="true" tabindex="-1"></a>gss_cat <span class="sc">%&gt;%</span> </span>
<span id="cb571-13"><a href="iteration.html#cb571-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">discard</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb571-14"><a href="iteration.html#cb571-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str</span>()</span>
<span id="cb571-15"><a href="iteration.html#cb571-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; tibble [21,483 x 3] (S3: tbl_df/tbl/data.frame)</span></span>
<span id="cb571-16"><a href="iteration.html#cb571-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ year   : int [1:21483] 2000 2000 2000 2000 2000 2000 2000 2000 2000 2000 ...</span></span>
<span id="cb571-17"><a href="iteration.html#cb571-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ age    : int [1:21483] 26 48 67 39 25 25 36 44 44 47 ...</span></span>
<span id="cb571-18"><a href="iteration.html#cb571-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  $ tvhours: int [1:21483] 12 NA 2 4 1 NA 3 NA 0 3 ...</span></span></code></pre></div>
<p><code>some()</code> and <code>every()</code> determine if the predicate is true for any or for all of the elements.</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="iteration.html#cb572-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, letters, <span class="fu">list</span>(<span class="dv">10</span>))</span>
<span id="cb572-2"><a href="iteration.html#cb572-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb572-3"><a href="iteration.html#cb572-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb572-4"><a href="iteration.html#cb572-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">some</span>(is_character)</span>
<span id="cb572-5"><a href="iteration.html#cb572-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span>
<span id="cb572-6"><a href="iteration.html#cb572-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb572-7"><a href="iteration.html#cb572-7" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb572-8"><a href="iteration.html#cb572-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">every</span>(is_vector)</span>
<span id="cb572-9"><a href="iteration.html#cb572-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p><code>detect()</code> finds the first element where the predicate is true; <code>detect_index()</code> returns its position.</p>
<div class="sourceCode" id="cb573"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb573-1"><a href="iteration.html#cb573-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">10</span>)</span>
<span id="cb573-2"><a href="iteration.html#cb573-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb573-3"><a href="iteration.html#cb573-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1] 10  6  1  3  2  4  5  8  9  7</span></span>
<span id="cb573-4"><a href="iteration.html#cb573-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb573-5"><a href="iteration.html#cb573-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb573-6"><a href="iteration.html#cb573-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">detect</span>(<span class="sc">~</span> .x <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb573-7"><a href="iteration.html#cb573-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10</span></span>
<span id="cb573-8"><a href="iteration.html#cb573-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb573-9"><a href="iteration.html#cb573-9" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb573-10"><a href="iteration.html#cb573-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">detect_index</span>(<span class="sc">~</span> .x <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb573-11"><a href="iteration.html#cb573-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p><code>head_while()</code> and <code>tail_while()</code> take elements from the start or end of a vector while a predicate is true:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="iteration.html#cb574-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb574-2"><a href="iteration.html#cb574-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head_while</span>(<span class="sc">~</span> .x <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb574-3"><a href="iteration.html#cb574-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 10  6</span></span>
<span id="cb574-4"><a href="iteration.html#cb574-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb574-5"><a href="iteration.html#cb574-5" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> </span>
<span id="cb574-6"><a href="iteration.html#cb574-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail_while</span>(<span class="sc">~</span> .x <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb574-7"><a href="iteration.html#cb574-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1] 8 9 7</span></span></code></pre></div>
</div>
<div id="reduce-and-accumulate" class="section level3" number="21.9.2">
<h3><span class="header-section-number">21.9.2</span> Reduce and accumulate</h3>
<p>Sometimes you have a complex list that you want to reduce to a simple list by repeatedly applying a function that reduces a pair to a singleton.
This is useful if you want to apply a two-table dplyr verb to multiple tables.
For example, you might have a list of data frames, and you want to reduce to a single data frame by joining the elements together:</p>
<div class="sourceCode" id="cb575"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb575-1"><a href="iteration.html#cb575-1" aria-hidden="true" tabindex="-1"></a>dfs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb575-2"><a href="iteration.html#cb575-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;John&quot;</span>, <span class="at">age =</span> <span class="dv">30</span>),</span>
<span id="cb575-3"><a href="iteration.html#cb575-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">sex =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;John&quot;</span>, <span class="st">&quot;Mary&quot;</span>), <span class="at">sex =</span> <span class="fu">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>)),</span>
<span id="cb575-4"><a href="iteration.html#cb575-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">trt =</span> <span class="fu">tibble</span>(<span class="at">name =</span> <span class="st">&quot;Mary&quot;</span>, <span class="at">treatment =</span> <span class="st">&quot;A&quot;</span>)</span>
<span id="cb575-5"><a href="iteration.html#cb575-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb575-6"><a href="iteration.html#cb575-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb575-7"><a href="iteration.html#cb575-7" aria-hidden="true" tabindex="-1"></a>dfs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(full_join)</span>
<span id="cb575-8"><a href="iteration.html#cb575-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;name&quot;</span></span>
<span id="cb575-9"><a href="iteration.html#cb575-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Joining, by = &quot;name&quot;</span></span>
<span id="cb575-10"><a href="iteration.html#cb575-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 x 4</span></span>
<span id="cb575-11"><a href="iteration.html#cb575-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   name    age sex   treatment</span></span>
<span id="cb575-12"><a href="iteration.html#cb575-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;    </span></span>
<span id="cb575-13"><a href="iteration.html#cb575-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 John     30 M     &lt;NA&gt;     </span></span>
<span id="cb575-14"><a href="iteration.html#cb575-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 Mary     NA F     A</span></span></code></pre></div>
<p>Or maybe you have a list of vectors, and want to find the intersection:</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="iteration.html#cb576-1" aria-hidden="true" tabindex="-1"></a>vs <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb576-2"><a href="iteration.html#cb576-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">10</span>),</span>
<span id="cb576-3"><a href="iteration.html#cb576-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">10</span>),</span>
<span id="cb576-4"><a href="iteration.html#cb576-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb576-5"><a href="iteration.html#cb576-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb576-6"><a href="iteration.html#cb576-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb576-7"><a href="iteration.html#cb576-7" aria-hidden="true" tabindex="-1"></a>vs <span class="sc">%&gt;%</span> <span class="fu">reduce</span>(intersect)</span>
<span id="cb576-8"><a href="iteration.html#cb576-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; [1]  1  3 10</span></span></code></pre></div>
<p><code>reduce()</code> takes a “binary” function (i.e. a function with two primary inputs), and applies it repeatedly to a list until there is only a single element left.</p>
<p><code>accumulate()</code> is similar but it keeps all the interim results.
You could use it to implement a cumulative sum:</p>
<div class="sourceCode" id="cb577"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb577-1"><a href="iteration.html#cb577-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">10</span>)</span>
<span id="cb577-2"><a href="iteration.html#cb577-2" aria-hidden="true" tabindex="-1"></a>x</span>
<span id="cb577-3"><a href="iteration.html#cb577-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1]  7  5 10  9  8  3  1  4  2  6</span></span>
<span id="cb577-4"><a href="iteration.html#cb577-4" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">accumulate</span>(<span class="st">`</span><span class="at">+</span><span class="st">`</span>)</span>
<span id="cb577-5"><a href="iteration.html#cb577-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  [1]  7 12 22 31 39 42 43 47 49 55</span></span></code></pre></div>
</div>
<div id="exercises-22" class="section level3" number="21.9.3">
<h3><span class="header-section-number">21.9.3</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Implement your own version of <code>every()</code> using a for loop.
Compare it with <code>purrr::every()</code>.
What does purrr’s version do that your version doesn’t?</p></li>
<li><p>Create an enhanced <code>col_summary()</code> that applies a summary function to every numeric column in a data frame.</p></li>
<li><p>A possible base R equivalent of <code>col_summary()</code> is:</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="iteration.html#cb578-1" aria-hidden="true" tabindex="-1"></a>col_sum3 <span class="ot">&lt;-</span> <span class="cf">function</span>(df, f) {</span>
<span id="cb578-2"><a href="iteration.html#cb578-2" aria-hidden="true" tabindex="-1"></a>  is_num <span class="ot">&lt;-</span> <span class="fu">sapply</span>(df, is.numeric)</span>
<span id="cb578-3"><a href="iteration.html#cb578-3" aria-hidden="true" tabindex="-1"></a>  df_num <span class="ot">&lt;-</span> df[, is_num]</span>
<span id="cb578-4"><a href="iteration.html#cb578-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb578-5"><a href="iteration.html#cb578-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sapply</span>(df_num, f)</span>
<span id="cb578-6"><a href="iteration.html#cb578-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>But it has a number of bugs as illustrated with the following inputs:</p>
<div class="sourceCode" id="cb579"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb579-1"><a href="iteration.html#cb579-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb579-2"><a href="iteration.html#cb579-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, </span>
<span id="cb579-3"><a href="iteration.html#cb579-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">1</span>,</span>
<span id="cb579-4"><a href="iteration.html#cb579-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb579-5"><a href="iteration.html#cb579-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb579-6"><a href="iteration.html#cb579-6" aria-hidden="true" tabindex="-1"></a><span class="co"># OK</span></span>
<span id="cb579-7"><a href="iteration.html#cb579-7" aria-hidden="true" tabindex="-1"></a><span class="fu">col_sum3</span>(df, mean)</span>
<span id="cb579-8"><a href="iteration.html#cb579-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Has problems: don&#39;t always return numeric vector</span></span>
<span id="cb579-9"><a href="iteration.html#cb579-9" aria-hidden="true" tabindex="-1"></a><span class="fu">col_sum3</span>(df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], mean)</span>
<span id="cb579-10"><a href="iteration.html#cb579-10" aria-hidden="true" tabindex="-1"></a><span class="fu">col_sum3</span>(df[<span class="dv">1</span>], mean)</span>
<span id="cb579-11"><a href="iteration.html#cb579-11" aria-hidden="true" tabindex="-1"></a><span class="fu">col_sum3</span>(df[<span class="dv">0</span>], mean)</span></code></pre></div>
<p>What causes the bugs?</p></li>
</ol>
</div>
</div>
<div id="case-study" class="section level2" number="21.10">
<h2><span class="header-section-number">21.10</span> Case study</h2>
<!--# Case study on web scraping from multiple pages -->

</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="vectors.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="communicate-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hadley/r4ds/edit/master/iteration.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
